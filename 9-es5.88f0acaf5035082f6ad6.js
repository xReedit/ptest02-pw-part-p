function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{DdEe:function(e,t,i){"use strict";i.r(t),i.d(t,"InicioModule",(function(){return Re}));var n,a,c=i("ofXK"),o=i("tyNb"),s=i("fXoL"),r=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Ib({type:n,selectors:[["app-main"]],decls:1,vars:0,template:function(e,t){1&e&&s.Pb(0,"router-outlet")},directives:[o.e],styles:[""]}),n),l=i("P3BU"),d=i("+lji"),u=i("ds6q"),b=function e(){_classCallCheck(this,e)},f=((a=function(){function e(t,i){_classCallCheck(this,e),this.auth=t,this.crudService=i,this.subjectClient=new u.Subject,this.isClientValid=!1}return _createClass(e,[{key:"isLogin",value:function(){return this.auth.loggedIn}},{key:"setIdOrg",value:function(e){this.clientSocket.idorg=e,this.setDataClient()}},{key:"setIdSede",value:function(e){this.clientSocket.idsede=e,this.setDataClient()}},{key:"setMesa",value:function(e){this.clientSocket.numMesaLector=e,this.setDataClient()}},{key:"setIsSoloLLevar",value:function(e){this.clientSocket.isSoloLLevar=e,this.setDataClient()}},{key:"setQrSuccess",value:function(e){this.clientSocket.isQrSuccess=e,this.setDataClient()}},{key:"setIsDelivery",value:function(e){this.clientSocket.isDelivery=e,this.setDataClient()}},{key:"setDireccionDeliverySelected",value:function(e){this.clientSocket.direccionEnvioSelected=e,this.setDataClient()}},{key:"setIsLoginByDNI",value:function(e){this.clientSocket.isLoginByDNI=e,this.setDataClient()}},{key:"setTelefono",value:function(e){this.clientSocket.telefono=e,this.setDataClient()}},{key:"getIsLoginByDNI",value:function(){return this.clientSocket||this.getDataClient(),this.clientSocket.isLoginByDNI||!1}},{key:"getIsQrSuccess",value:function(){return this.clientSocket||this.getDataClient(),this.clientSocket.isQrSuccess||!1}},{key:"getIsDelivery",value:function(){return this.clientSocket||this.getDataClient(),this.clientSocket.isDelivery||!1}},{key:"verifyClient",value:function(){var e=this;return this.getDataClient(),this.clientSocket.isLoginByDNI?(this.registerCliente(),this.subjectClient.asObservable()):(this.auth.userProfile$.subscribe((function(t){t?(e.clientSocket.datalogin=t,e.setDataClient(),e.registerCliente()):e.subjectClient.next(null)}),(function(e){console.log(e)}),(function(){console.log("complete")})),this.subjectClient.asObservable())}},{key:"registerCliente",value:function(){var e=this,t=0;this.crudService.postFree(this.clientSocket,"ini","register-cliente-login",!1).subscribe((function(i){t=i.data[0].idcliente,e.clientSocket.idcliente=t,e.clientSocket.nombres=e.clientSocket.datalogin.name,e.clientSocket.usuario=e.clientSocket.datalogin.given_name,e.clientSocket.isCliente=!0,e.clientSocket.telefono=i.data[0].telefono,e.clientSocket.efectivoMano=0,e.setDataClient(),e.subjectClient.next(e.clientSocket)}))}},{key:"setDataClient",value:function(){var e=JSON.stringify(this.clientSocket);localStorage.setItem("sys::tpm",btoa(e))}},{key:"getDataClient",value:function(){var e=localStorage.getItem("sys::tpm");return this.clientSocket=e?JSON.parse(atob(e)):new b,this.clientSocket}},{key:"loginOut",value:function(){this.auth.logout(),localStorage.removeItem("sys::tpm")}},{key:"unsubscribeClient",value:function(){this.subjectClient.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||a)(s.Yb(l.a),s.Yb(d.a))},a.\u0275prov=s.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),h=i("FKr1"),g=i("bTqV");function v(e,t){if(1&e&&(s.Ub(0,"div",22),s.Pb(1,"hr"),s.Ub(2,"p",23),s.Ec(3,"Hola "),s.Ub(4,"strong"),s.Ec(5),s.Tb(),s.Ec(6,", que quieres pedir hoy?"),s.Tb(),s.Tb()),2&e){var i=s.gc();s.Cb(5),s.Fc(i.nombreClientSocket)}}var m,p,C,y=function(){return["/login-personal-autorizado"]},k=((m=function(){function e(t,i){_classCallCheck(this,e),this.verifyClientService=t,this.router=i,this.veryfyClient=null,this.isLogin=!1,this.nombreClientSocket=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.nombreClientSocket="",screen.orientation.unlock(),localStorage.clear()}},{key:"loadInit",value:function(){var e=this;this.verifyClientService.getDataClient(),this.verifyClientService.setQrSuccess(!1),this.verifyClientService.setIsDelivery(!1),this.verifyClientService.setDireccionDeliverySelected(null),this.isLogin=this.verifyClientService.isLogin(),this.verifyClientService.setMesa(null),this.verifyClientService.setIdOrg(null),this.verifyClientService.setIdSede(null),this.veryfyClient=this.verifyClientService.verifyClient().subscribe((function(t){e.nombreClientSocket=t.usuario,e.isLogin=!!e.verifyClientService.getIsLoginByDNI()||e.verifyClientService.isLogin(),e.verifyClientService.setQrSuccess(!1)}))}},{key:"ngOnDestroy",value:function(){}},{key:"cerrarSession",value:function(){this.verifyClientService.loginOut()}},{key:"showClienteProfile",value:function(){this.isLogin&&this.router.navigate(["/cliente-profile"])}},{key:"showDelivery",value:function(){this.isLogin?this.router.navigate(["./zona-delivery"]):(this.verifyClientService.setIsDelivery(!0),this.router.navigate(["/login-client"]))}}]),e}()).\u0275fac=function(e){return new(e||m)(s.Ob(f),s.Ob(o.b))},m.\u0275cmp=s.Ib({type:m,selectors:[["app-inicio"]],decls:34,vars:3,consts:[[1,"text-center","container-ini"],[1,"container-body"],[1,"header"],[1,"inner-header","flex"],["src","assets/images/papaya_text-white.png","width","190px"],[1,"fs-12"],["viewBox","0 24 150 28","preserveAspectRatio","none","shape-rendering","auto",1,"waves"],["id","gentle-wave","d","M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"],[1,"parallax"],[0,"xlink","href","#gentle-wave","x","48","y","0","fill","rgba(255,255,255,0.7"],[0,"xlink","href","#gentle-wave","x","48","y","3","fill","rgba(255,255,255,0.5)"],[0,"xlink","href","#gentle-wave","x","48","y","5","fill","rgba(255,255,255,0.3)"],[0,"xlink","href","#gentle-wave","x","48","y","7","fill","#fff"],[1,"text-center","pl-4","pr-4"],["src","assets/images/img-ini.png","alt","ini",2,"max-width","320px","width","100%"],[1,"fs-14",2,"color","#616161"],["class","border-bottom","style","background: blanchedalmond;",4,"ngIf"],["matRipple","",1,"p-3","border-bottom","border-top",3,"routerLink"],["src","assets/images/btn-login.png","alt","btn-scan"],[1,"pl-2"],[1,"xfooter","bg-white"],["mat-button","","color","primary"],[1,"border-bottom",2,"background","blanchedalmond"],[1,"fs-13"]],template:function(e,t){1&e&&(s.Ub(0,"div"),s.Ub(1,"div",0),s.Ub(2,"div",1),s.Ub(3,"div",2),s.Ub(4,"div",3),s.Pb(5,"br"),s.Ub(6,"div"),s.Pb(7,"img",4),s.Ub(8,"p"),s.Ec(9,"Repartidor "),s.Ub(10,"span",5),s.Ec(11,"v.1e"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"div"),s.fc(),s.Ub(13,"svg",6),s.Ub(14,"defs"),s.Pb(15,"path",7),s.Tb(),s.Ub(16,"g",8),s.Pb(17,"use",9),s.Pb(18,"use",10),s.Pb(19,"use",11),s.Pb(20,"use",12),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.ec(),s.Ub(21,"div",13),s.Pb(22,"img",14),s.Ub(23,"p",15),s.Ec(24,"Gana dinero con cada entrega que hagas, \xa1no hay l\xedmites de ganancia!."),s.Tb(),s.Tb(),s.Cc(25,v,7,1,"div",16),s.Pb(26,"br"),s.Ub(27,"div",17),s.Pb(28,"img",18),s.Ub(29,"span",19),s.Ec(30,"Ingresar"),s.Tb(),s.Tb(),s.Ub(31,"div",20),s.Ub(32,"button",21),s.Ec(33,"Solicitar Resgistro"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(25),s.mc("ngIf",t.isLogin),s.Cb(2),s.mc("routerLink",s.qc(2,y)))},directives:[c.m,h.e,o.c,g.a],styles:[".container-ini[_ngcontent-%COMP%]{position:relative;min-height:100vh}.container-body[_ngcontent-%COMP%]{padding-bottom:3.5rem}.xfooter[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;padding:20px}"]}),m),S=function e(){_classCallCheck(this,e)},T=i("IYfF"),I=i("zOUh"),D=i("3Pt+"),U=i("kmnG"),P=i("qFsG"),w=i("bv9b"),O=((p=function(){function e(t,i,n){_classCallCheck(this,e),this.router=t,this.authService=i,this.infoToken=n,this.loading=!1,this.msjErr=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.usuario=new S}},{key:"logear",value:function(){var e=this;this.loading=!0,this.msjErr=!1,this.usuario.op=1,console.log("this.usuario",this.usuario),this.authService.setLocalToken(""),this.authService.getUserLogged(this.usuario).subscribe((function(t){setTimeout((function(){console.log("res"),t.success?(e.authService.setTokenAuth(t.token),e.authService.getInfoRepartidor(t.usuario).subscribe((function(t){e.authService.setLocalToken(t),e.authService.setLoggedStatus(!0),e.authService.setLocalUsuario(e.usuario),e.infoToken.converToJSON(),e.router.navigate(["./main-inicio"])}))):(e.loading=!1,e.msjErr=!0)}),2e3)}))}}]),e}()).\u0275fac=function(e){return new(e||p)(s.Ob(o.b),s.Ob(T.a),s.Ob(I.a))},p.\u0275cmp=s.Ib({type:p,selectors:[["app-login-personal-autorizado"]],decls:24,vars:5,consts:[[1,"text-center","animated","fadeIn"],["src","assets/images/img-ini.png","alt","..",2,"max-width","300px"],[1,"text-center","ml-5","mr-5"],["src","assets/images/papaya_text-2.png","width","160px"],[1,"fs-16","fw-100","text-secondary"],[1,"content-login-us",3,"ngSubmit"],["frmpass","ngForm"],[1,"row"],[1,"col-sm-6"],[1,"w-100"],["matInput","","placeholder","Usuario","name","nomusuario","required","",3,"ngModel","ngModelChange"],["matInput","","type","password","name","pass","placeholder","Clave","required","",3,"ngModel","ngModelChange"],[1,"text-center"],["mode","indeterminate",3,"hidden"],[1,"fs-14","font-weight-bold","text-danger","animated","flash",3,"hidden"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(e,t){if(1&e&&(s.Ub(0,"div",0),s.Pb(1,"br"),s.Pb(2,"img",1),s.Ub(3,"div",2),s.Pb(4,"img",3),s.Ub(5,"p",4),s.Ec(6,"Repartidor Autorizado"),s.Tb(),s.Ub(7,"form",5,6),s.cc("ngSubmit",(function(){return t.logear()})),s.Ub(9,"div",7),s.Ub(10,"div",8),s.Ub(11,"mat-form-field",9),s.Ub(12,"input",10),s.cc("ngModelChange",(function(e){return t.usuario.nomusuario=e})),s.Tb(),s.Tb(),s.Tb(),s.Ub(13,"div",8),s.Ub(14,"mat-form-field",9),s.Ub(15,"input",11),s.cc("ngModelChange",(function(e){return t.usuario.pass=e})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(16,"div",12),s.Pb(17,"mat-progress-bar",13),s.Ub(18,"span",14),s.Ec(19,"Credenciales Incorrectas."),s.Tb(),s.Tb(),s.Pb(20,"hr"),s.Ub(21,"div",12),s.Ub(22,"button",15),s.Ec(23,"Listo, Ingresar"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e){var i=s.vc(8);s.Cb(12),s.mc("ngModel",t.usuario.nomusuario),s.Cb(3),s.mc("ngModel",t.usuario.pass),s.Cb(2),s.mc("hidden",!t.loading),s.Cb(1),s.mc("hidden",!t.msjErr),s.Cb(4),s.mc("disabled",!i.valid)}},directives:[D.q,D.k,D.l,U.a,P.a,D.b,D.o,D.j,D.m,w.a,g.a],styles:[".content-login-us[_ngcontent-%COMP%]{background:#eee;border-radius:5px;padding:15px}"]}),p),x=i("0IaG"),_=i("VhxH"),M=((C=function(){function e(t,i){_classCallCheck(this,e),this.dialogRef=t,this.data=i,this.hasPermissionPosition=!0,this.cLocal=i.cLocal}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadGPS()}},{key:"loadGPS",value:function(){var e=this;setTimeout((function(){e.getPosition()}),4e3)}},{key:"getPosition",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.cDispositivo={lat:t.coords.latitude,lng:t.coords.longitude},e.hasPermissionPosition=!0,e.data.posIssValid=!!e.data.isDemo||e.arePointsNear(e.cLocal,e.cDispositivo,1),e.cerrarDlg()}),this.showPositionError)}},{key:"showPositionError",value:function(e){this.hasPermissionPosition=!1,this.data.posIssValid=!1,this.cerrarDlg()}},{key:"arePointsNear",value:function(e,t,i){var n={lat:t.lat,lon:t.lng};return Object(_.insideCircle)({lat:e.lat,lon:e.lng},n,65)}},{key:"cerrarDlg",value:function(){this.dialogRef.close(this.data.posIssValid)}}]),e}()).\u0275fac=function(e){return new(e||C)(s.Ob(x.f),s.Ob(x.a))},C.\u0275cmp=s.Ib({type:C,selectors:[["app-dialog-ubicacion"]],decls:4,vars:0,consts:[[1,"text-center","p-3"],[1,"fa","fa-map-marker","fa-2x"],[1,"fs-20"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Pb(1,"i",1),s.Ub(2,"p",2),s.Ec(3,"Verificando su ubicaci\xf3n."),s.Tb(),s.Tb())},styles:[""]}),C),L=i("IyRd");function E(e,t){1&e&&(s.Ub(0,"div"),s.Ub(1,"p",8),s.Ec(2,"Es necesario que active la ubicaci\xf3n de su telefono "),s.Pb(3,"i",9),s.Tb(),s.Pb(4,"br"),s.Tb())}function R(e,t){1&e&&(s.Ub(0,"p",10),s.Ec(1,"Obteniendo Camara..."),s.Tb())}function V(e,t){1&e&&s.Pb(0,"div",11)}function F(e,t){if(1&e){var i=s.Vb();s.Ub(0,"button",12),s.cc("click",(function(){return s.wc(i),s.gc(2).onDeviceSelectChange()})),s.Pb(1,"i",13),s.Ub(2,"span",14),s.Ec(3,"Rotar"),s.Tb(),s.Tb()}}function N(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",3),s.Cc(1,E,5,0,"div",2),s.Ub(2,"p"),s.Ec(3,"Scanear codigo"),s.Tb(),s.Cc(4,R,2,0,"p",4),s.Ub(5,"zxing-scanner",5),s.cc("deviceChange",(function(e){return s.wc(i),s.gc().currentDevice=e}))("camerasFound",(function(e){return s.wc(i),s.gc().onCamerasFound(e)}))("permissionResponse",(function(e){return s.wc(i),s.gc().onHasPermission(e)}))("scanSuccess",(function(e){return s.wc(i),s.gc().scanSuccessHandler(e)})),s.Tb(),s.Cc(6,V,1,0,"div",6),s.Pb(7,"br"),s.Cc(8,F,4,0,"button",7),s.Tb()}if(2&e){var n=s.gc();s.Cb(1),s.mc("ngIf",!n.hasPermissionPosition),s.Cb(3),s.mc("ngIf",!n.isCameraReady),s.Cb(1),s.mc("device",n.currentDevice),s.Cb(1),s.mc("ngIf",n.isCameraReady),s.Cb(2),s.mc("ngIf",n.isOptionChangeCamera)}}function q(e,t){1&e&&(s.Sb(0),s.Ub(1,"p"),s.Ec(2,"Obteniendo datos ..."),s.Tb(),s.Pb(3,"mat-progress-bar",22),s.Rb())}function A(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",23),s.Ub(1,"p",24),s.Ec(2,"Codigo no valido."),s.Tb(),s.Tb(),s.Pb(3,"br"),s.Ub(4,"button",20),s.cc("click",(function(){return s.wc(i),s.gc(2).volverALeer()})),s.Pb(5,"i",25),s.Ec(6," Intentar nuevamente."),s.Tb()}}function Q(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div"),s.Ub(1,"div",15),s.Cc(2,q,4,0,"ng-container",16),s.Cc(3,A,7,0,"ng-template",null,17,s.Dc),s.Ub(5,"div",18),s.Pb(6,"br"),s.Ub(7,"p",19),s.Ec(8,"Se requiere que acepte los permisos."),s.Tb(),s.Ub(9,"button",20),s.cc("click",(function(){return s.wc(i),s.gc().getPosition()})),s.Pb(10,"i",21),s.Ec(11," Intentar nuevamente."),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){var n=s.vc(4),a=s.gc();s.Cb(2),s.mc("ngIf",a.isCodigoQrValido)("ngIfElse",n),s.Cb(3),s.mc("hidden",a.hasPermissionPosition)}}var j,z=((j=function(){function e(t,i,n,a){_classCallCheck(this,e),this.verifyClientService=t,this.crudService=i,this.dialog=n,this.router=a,this.codQR="",this.hasPermission=!0,this.hasPermissionPosition=!0,this.isProcesando=!1,this.currentDevice=null,this.indexSelectCamera=0,this.isOptionChangeCamera=!1,this.isCodigoQrValido=!0,this.isCameraReady=!1,this.isSedeRequiereGPS=!1,this.isSoloLLevar=!1,this.isDemo=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.currentDevice=null}},{key:"scanSuccessHandler",value:function(e){this.codQR=e,this.isProcesando=!0,this.leerDatosQR()}},{key:"onHasPermission",value:function(e){this.hasPermission=e}},{key:"showPositionError",value:function(e){this.hasPermissionPosition=!1}},{key:"onCamerasFound",value:function(e){this.availableDevices=e,this.hasDevices=Boolean(e&&e.length),this.indexSelectCamera=e.length-1,this.isOptionChangeCamera=this.indexSelectCamera>0,this.deviceSelectChange()}},{key:"onDeviceSelectChange",value:function(){this.isCameraReady=!1,this.indexSelectCamera=this.indexSelectCamera===this.availableDevices.length-1?0:this.indexSelectCamera+1,this.deviceSelectChange()}},{key:"deviceSelectChange",value:function(){var e=this;this.currentDevice=this.availableDevices[this.indexSelectCamera]||null,setTimeout((function(){e.isCameraReady=!0}),1e3)}},{key:"leerDatosQR",value:function(){var e=this;this.isCodigoQrValido=!0;var t=[];try{t=atob(this.codQR).split("::")}catch(o){return void this.resValidQR(!1)}var i="keyQrPwa"===t[0];if(i||(this.isDemo="keyQrPwaDemo"===t[0]),i||this.isDemo){var n=t[1].split("|"),a=n[0],c=n[2];this.isSoloLLevar="-1"===a,this.crudService.postFree({idsede:c},"ini","info-sede-gps",!1).subscribe((function(t){e.isSedeRequiereGPS="0"!==t.data[0].pwa_requiere_gps,e.isSedeRequiereGPS=!!e.isSoloLLevar||e.isSedeRequiereGPS,e.isSoloLLevar||e.verifyClientService.setMesa(a),e.verifyClientService.getDataClient(),e.verifyClientService.setIdSede(c),e.verifyClientService.setQrSuccess(!0),e.verifyClientService.setIsSoloLLevar(e.isSoloLLevar);var i=n[1].split(":"),o={lat:parseFloat(i[0]),lng:parseFloat(i[1])};e.isSedeRequiereGPS?e.openDialogPOS(o):e.resValidQR(!0)}))}else this.resValidQR(i)}},{key:"openDialogPOS",value:function(e){var t=this,i=!1,n=new x.d;n.disableClose=!0,n.hasBackdrop=!0,n.data={cLocal:e,isDemo:this.isDemo},this.dialog.open(M,n).afterClosed().subscribe((function(e){e||(i=!1),i=e,t.resValidQR(i)}))}},{key:"resValidQR",value:function(e){var t=this;e?setTimeout((function(){t.router.navigate(["/lector-success"])}),1e3):this.isCodigoQrValido=!1}},{key:"volverALeer",value:function(){this.isProcesando=!1,this.isCodigoQrValido=!0}}]),e}()).\u0275fac=function(e){return new(e||j)(s.Ob(f),s.Ob(d.a),s.Ob(x.b),s.Ob(o.b))},j.\u0275cmp=s.Ib({type:j,selectors:[["app-lector-codigo-qr"]],decls:3,vars:2,consts:[[1,"container-scan","animated","fadeIn"],["class","video text-center",4,"ngIf"],[4,"ngIf"],[1,"video","text-center"],["class","fw-100",4,"ngIf"],[1,"video-scan",3,"device","deviceChange","camerasFound","permissionResponse","scanSuccess"],["class","linea-scan",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],[1,"text-danger","fs-14"],[1,"fa","fa-map-marker"],[1,"fw-100"],[1,"linea-scan"],["mat-button","",3,"click"],["aria-hidden","true",1,"fa","fa-undo"],[1,"pl-2"],[1,"text-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"hidden"],[1,"text-info"],["mat-stroked-button","",3,"click"],["aria-hidden","true",1,"fa","fa-map-marker"],["mode","indeterminate"],[1,"animated","pulse"],[1,"text-danger"],["aria-hidden","true",1,"fa","fa-arrow-left"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Cc(1,N,9,5,"div",1),s.Cc(2,Q,12,3,"div",2),s.Tb()),2&e&&(s.Cb(1),s.mc("ngIf",!t.isProcesando),s.Cb(1),s.mc("ngIf",t.isProcesando))},directives:[c.m,L.a,g.a,w.a],styles:["[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%]  video{max-width:300px;max-height:225px}.container-scan[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;background:hsla(0,0%,62%,.31)}.container-scan[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%], .video-scan[_ngcontent-%COMP%]{max-width:300px}.video-scan[_ngcontent-%COMP%]{max-height:225px}.linea-scan[_ngcontent-%COMP%]{height:20px;background:rgba(0,230,118,.5);position:relative;-webkit-animation:updown 3s infinite;animation:updown 3s infinite}@-webkit-keyframes updown{0%{bottom:15px}50%{bottom:235px}to{bottom:15px}}@keyframes updown{0%{bottom:15px}50%{bottom:235px}to{bottom:15px}}"]}),j);function G(e,t){if(1&e&&(s.Ub(0,"div",15),s.Ub(1,"h2",16),s.Ec(2),s.hc(3,"number"),s.Tb(),s.Tb()),2&e){var i=s.gc(2);s.Cb(2),s.Fc(s.jc(3,1,i.numMesa,"2."))}}function B(e,t){1&e&&(s.Ub(0,"div"),s.Pb(1,"img",17),s.Tb())}function J(e,t){if(1&e&&(s.Ub(0,"div",22),s.Ub(1,"div",13),s.Pb(2,"img",23),s.Tb(),s.Ub(3,"p",10),s.Ec(4),s.Tb(),s.Tb()),2&e){var i=t.$implicit;s.Cb(2),s.oc("src","/assets/images/",i.img,"",s.xc),s.Cb(2),s.Fc(i.descripcion)}}function Y(e,t){if(1&e&&(s.Ub(0,"div",18),s.Ub(1,"p",19),s.Ec(2,"Informaci\xf3n B\xe1sica"),s.Tb(),s.Ub(3,"div",20),s.Cc(4,J,5,2,"div",21),s.Tb(),s.Tb()),2&e){var i=s.gc(2);s.Cb(4),s.mc("ngForOf",i.listReglas)}}function H(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",1),s.Ub(1,"div",2),s.Ub(2,"div",3),s.Ub(3,"div",4),s.Cc(4,G,4,4,"div",5),s.Cc(5,B,2,0,"div",6),s.Tb(),s.Tb(),s.Ub(6,"div",7),s.Ub(7,"p",8),s.Ec(8),s.Tb(),s.Ub(9,"p",9),s.Ec(10),s.Tb(),s.Ub(11,"p",10),s.Ec(12),s.Tb(),s.Tb(),s.Pb(13,"hr"),s.Cc(14,Y,5,1,"div",11),s.Tb(),s.Ub(15,"footer"),s.Ub(16,"div",12),s.cc("click",(function(){return s.wc(i),s.gc().listoEmpezar()})),s.Ub(17,"p"),s.Ub(18,"span",13),s.Ec(19,"Listo Empezar"),s.Tb(),s.Pb(20,"i",14),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(4),s.mc("ngIf",n.numMesa>0),s.Cb(1),s.mc("ngIf",n.usLog.isSoloLLevar),s.Cb(3),s.Fc(n.dataSede.nombre),s.Cb(2),s.Fc(n.dataSede.eslogan),s.Cb(2),s.Fc(n.dataSede.pwa_msj_ini),s.Cb(2),s.mc("ngIf",n.listReglas)}}var K,$,Z,X=((Z=function(){function e(t,i,n,a){_classCallCheck(this,e),this.crudService=t,this.verifyClientService=i,this.auth=n,this.router=a,this.numMesa=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadDataIni()}},{key:"loadDataIni",value:function(){var e=this;this.usLog=this.verifyClientService.getDataClient();var t={idsede:this.usLog.idsede};this.numMesa=this.usLog.numMesaLector,console.log(this.usLog),this.crudService.postFree(t,"ini","info-sede",!1).subscribe((function(t){e.dataSede=t.data[0],e.verifyClientService.getDataClient(),e.verifyClientService.setIdOrg(e.dataSede.idorg),e.verifyClientService.setIdSede(e.dataSede.idsede),e.crudService.getAll("ini","reglas-app",!1,!1,!1).subscribe((function(t){e.listReglas=t.data.map((function(t){return t.descripcion=t.descripcion.replace("?",e.dataSede.pwa_time_limit),t}))}))}))}},{key:"listoEmpezar",value:function(){this.auth.loggedIn||this.verifyClientService.getIsLoginByDNI()?this.router.navigate(["/callback-auth"]):this.router.navigate(["/login-client"])}}]),e}()).\u0275fac=function(e){return new(e||Z)(s.Ob(d.a),s.Ob(f),s.Ob(l.a),s.Ob(o.b))},Z.\u0275cmp=s.Ib({type:Z,selectors:[["app-lector-success"]],decls:1,vars:1,consts:[["class","animated fadeIn text-center",4,"ngIf"],[1,"animated","fadeIn","text-center"],[1,"content-body"],[1,"pt-3","pb-2","border-bottom","fondo-beige"],[1,"text-center","d-inline"],["class","content-num-mesa",4,"ngIf"],[4,"ngIf"],[1,"info-establecimiento-content","pt-3"],[1,"fs-20"],[1,"fw-100","fs-12","pb-2"],[1,"fw-100","fs-13"],["class","pl-3 pr-3 mb-4 animated fadeInUp",4,"ngIf"],["matRipple","",1,"content-ready",3,"click"],[1,"pr-2"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"content-num-mesa"],[1,"num-mesa"],["src","/assets/images/solo-llevar.png"],[1,"pl-3","pr-3","mb-4","animated","fadeInUp"],[1,"pb-2"],[1,"text-left"],["class","d-flex p-1 mb-3",4,"ngFor","ngForOf"],[1,"d-flex","p-1","mb-3"],["alt","i1",3,"src"]],template:function(e,t){1&e&&s.Cc(0,H,21,6,"div",0),2&e&&s.mc("ngIf",t.dataSede)},directives:[c.m,h.e,c.l],pipes:[c.e],styles:["[_ngcontent-%COMP%]:global   .text-simple[_ngcontent-%COMP%]{display:none}.content-body[_ngcontent-%COMP%]{min-height:calc(100vh - 74px)}.fondo-beige[_ngcontent-%COMP%]{background:beige}.content-num-mesa[_ngcontent-%COMP%]{border:1px solid #616161;border-radius:50%;overflow:hidden;display:table-cell;text-align:center;vertical-align:middle;color:#424242}.num-mesa[_ngcontent-%COMP%]{margin:0;font-size:42px}.info-establecimiento-content[_ngcontent-%COMP%], .num-mesa[_ngcontent-%COMP%]{padding:15px}.content-register[_ngcontent-%COMP%]{padding:10px;background:#303f9f;color:#fff}.content-ready[_ngcontent-%COMP%]{padding:25px;background:#00695c;color:#fff}.xp-15[_ngcontent-%COMP%]{padding:15px}p[_ngcontent-%COMP%]{margin:0}"]}),Z),W=(($=function(){function e(t,i,n,a){_classCallCheck(this,e),this.verifyClientService=t,this.router=i,this.authService=n,this.infoToken=a,this.isProcesando=!0,this.veryfyClient=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.veryfyClient=this.verifyClientService.verifyClient().subscribe((function(t){t&&(e.isProcesando=!1,e.setInfoToken(t))}))}},{key:"ngOnDestroy",value:function(){this.veryfyClient.unsubscribe()}},{key:"setInfoToken",value:function(e){var t="eyCJ9.".concat(btoa(JSON.stringify(e)));this.authService.setLocalToken(t),this.authService.setLoggedStatus(!0),this.infoToken.converToJSON(),!this.infoToken.infoUsToken.direccionEnvioSelected&&this.infoToken.isDelivery()?(this.verifyClientService.setIsDelivery(!0),this.router.navigate(["./zona-delivery"])):this.router.navigate(["./pedido"])}}]),e}()).\u0275fac=function(e){return new(e||$)(s.Ob(f),s.Ob(o.b),s.Ob(T.a),s.Ob(I.a))},$.\u0275cmp=s.Ib({type:$,selectors:[["app-callback-auth"]],decls:6,vars:0,consts:[[1,"container-scan","animated","fadeIn","text-center"],[1,"text-center"],["mode","indeterminate"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div"),s.Ub(2,"div",1),s.Ub(3,"p"),s.Ec(4,"Obteniendo datos ..."),s.Tb(),s.Pb(5,"mat-progress-bar",2),s.Tb(),s.Tb(),s.Tb())},directives:[w.a],styles:[".container-scan[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;background:hsla(0,0%,62%,.31)}"]}),$),ee=((K=function(){function e(t){_classCallCheck(this,e),this.verifyClientService=t}return _createClass(e,[{key:"canActivate",value:function(){return this.verifyClientService.getIsQrSuccess()||this.verifyClientService.getIsDelivery()}}]),e}()).\u0275fac=function(e){return new(e||K)(s.Yb(f))},K.\u0275prov=s.Kb({token:K,factory:K.\u0275fac,providedIn:"root"}),K);function te(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",3),s.Ub(1,"div",4),s.Ub(2,"p",5),s.Ec(3,"Registrate para comenzar hacer tu pedido."),s.Tb(),s.Tb(),s.Pb(4,"hr"),s.Ub(5,"div",6),s.Ub(6,"div",7),s.cc("click",(function(){return s.wc(i),s.gc().goFb()})),s.Pb(7,"i",8),s.Ub(8,"span",9),s.Ec(9,"Con Facebook"),s.Tb(),s.Tb(),s.Ub(10,"div",10),s.cc("click",(function(){return s.wc(i),s.gc().goGmail()})),s.Pb(11,"i",11),s.Ub(12,"span",9),s.Ec(13,"Con Gmail"),s.Tb(),s.Tb(),s.Pb(14,"hr"),s.Ub(15,"div",12),s.cc("click",(function(){return s.wc(i),s.gc().viewLoginDni()})),s.Pb(16,"i",13),s.Ub(17,"span",9),s.Ec(18,"Con DNI"),s.Tb(),s.Tb(),s.Tb(),s.Tb()}}var ie=function(e){return{selected:e}};function ne(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",31),s.cc("click",(function(){s.wc(i);var e=t.$implicit;return s.gc(4).verificarDNI(e)})),s.Ub(1,"div"),s.Ec(2),s.Tb(),s.Tb()}if(2&e){var n=t.$implicit;s.mc("ngClass",s.rc(2,ie,n.selected)),s.Cb(2),s.Fc(n.fecha)}}function ae(e,t){if(1&e&&(s.Sb(0,14),s.Ub(1,"p",27),s.Ec(2),s.Tb(),s.Ub(3,"span",28),s.Ec(4,"Para confirmar su identidad, indique la fecha en que nacio."),s.Tb(),s.Ub(5,"div",29),s.Cc(6,ne,3,4,"div",30),s.Tb(),s.Rb()),2&e){var i=s.gc(3);s.Cb(2),s.Gc(" ",i.dataCliente.name," "),s.Cb(4),s.mc("ngForOf",i.listViewDate)}}function ce(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div"),s.Ub(1,"mat-form-field",20),s.Ub(2,"input",21,22),s.cc("keyup.enter",(function(){s.wc(i);var e=s.vc(3);return s.gc(2).buscarDNI(e.value)})),s.Tb(),s.Ub(4,"button",23),s.cc("click",(function(){s.wc(i);var e=s.vc(3);return s.gc(2).buscarDNI(e.value)})),s.Pb(5,"i",24),s.Tb(),s.Tb(),s.Ub(6,"div",20),s.Pb(7,"mat-progress-bar",25),s.Ub(8,"span",26),s.Ec(9),s.Tb(),s.Tb(),s.Cc(10,ae,7,2,"ng-container",2),s.Tb()}if(2&e){var n=s.gc(2);s.Cb(7),s.mc("hidden",!n.loadConsulta),s.Cb(2),s.Fc(n.msj_error),s.Cb(1),s.mc("ngIf",n.isValidDNI)}}function oe(e,t){1&e&&(s.Sb(0),s.Ub(1,"span",35),s.Ec(2,"Excelente usuario validado."),s.Tb(),s.Rb())}function se(e,t){1&e&&(s.Ub(0,"span",36),s.Ec(1,"Seleccione con cuidado, de lo contrario no podra registrase con este documento."),s.Tb())}function re(e,t){if(1&e&&(s.Sb(0,32),s.Cc(1,oe,3,0,"ng-container",33),s.Cc(2,se,2,0,"ng-template",null,34,s.Dc),s.Rb()),2&e){var i=s.vc(3),n=s.gc(2);s.Cb(1),s.mc("ngIf",n.isDateBirthdayValid&&n.isPaseOk)("ngIfElse",i)}}function le(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",14),s.Ub(1,"div",15),s.cc("click",(function(){return s.wc(i),s.gc().viewLoginDni()})),s.Ub(2,"p",5),s.Pb(3,"i",16),s.Ec(4," Escriba su DNI."),s.Tb(),s.Tb(),s.Pb(5,"hr"),s.Ub(6,"div",17),s.Cc(7,ce,11,3,"div",18),s.Ub(8,"div",3),s.Cc(9,re,4,2,"ng-container",19),s.Tb(),s.Tb(),s.Tb()}if(2&e){var n=s.gc();s.Cb(7),s.mc("ngIf",!n.isPaseOk),s.Cb(2),s.mc("ngIf",n.isListDateSelect)}}var de,ue=((de=function(){function e(t,i,n,a){_classCallCheck(this,e),this.verifyClientService=t,this.router=i,this.auth=n,this.crudService=a,this.loadConsulta=!1,this.isViewLoginDNI=!1,this.isValidDNI=!1,this.isDateBirthdayValid=!1,this.isListDateSelect=!1,this.isPaseOk=!1,this.dataClienteSend=new b,this.msj_error="",this.listViewDate=[],this.listDay=[],this.listMotnh=[],this.listYear=[],this.numDocumento=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.dataClienteSend=this.verifyClientService.getDataClient()}},{key:"goFb",value:function(){this.auth.login("#","facebook")}},{key:"goGmail",value:function(){this.auth.login("#","google-oauth2")}},{key:"viewLoginDni",value:function(){this.isViewLoginDNI=!this.isViewLoginDNI}},{key:"buscarDNI",value:function(e){var t=this;e.length<8||this.numDocumento===e||(this.isValidDNI=!1,this.isListDateSelect=!1,this.limpiarFrm(),this.numDocumento=e,this.loadConsulta=!0,this.crudService.getConsultaRucDni("dni",this.numDocumento).subscribe((function(e){if(!e.success)return t.loadConsulta=!1,t.isValidDNI=!1,void(t.msj_error="Numero de documento no valido.");t.loadConsulta=!1,t.isValidDNI=!0,t.dataCliente=e.data,t.getListDates()}),(function(e){t.loadConsulta=!1,t.isValidDNI=!1,t.msj_error="No se encontro, intentelo nuevamente.",alert(e.message)})))}},{key:"limpiarFrm",value:function(){this.listViewDate=[],this.listDay=[],this.listMotnh=[],this.listYear=[],this.isValidDNI=!1,this.numDocumento="",this.msj_error=""}},{key:"getListDates",value:function(){var e=this.dataCliente.date_of_birthday.split("/");this.listViewDate=[],this.listDay=[],this.listMotnh=[],this.listYear=[],this.addListDate(this.listDay,e[0],"dd"),this.addListDate(this.listMotnh,e[1],"mm"),this.addListDate(this.listYear,e[2],"yy");var t=0,i="";for(this.listViewDate.push({fecha:this.dataCliente.date_of_birthday,selected:!1});t<3;)i="".concat(this.listDay[this.getRandomArbitrary(0,2)],"/").concat(this.listMotnh[this.getRandomArbitrary(0,2)],"/").concat(this.listYear[this.getRandomArbitrary(0,2)]),this.listViewDate.push({fecha:i,selected:!1}),t++;this.listViewDate.sort((function(e,t){return.5-Math.random()})),this.listViewDate.sort((function(e,t){return.5-Math.random()}))}},{key:"addListDate",value:function(e,t,i){var n=parseInt(t.toString(),0),a=0;e.push(this.ceroIzq(n)),a=this.getRandomArbitrary(1,4);var c=this.getRandomArbitrary(0,20)<10?n+a:n-a;c=c===n?this.getRandomArbitrary(0,20)<10?n+a:n-a:c,e.push(this.ceroIzq(this.verificarNum(c,i))),a=this.getRandomArbitrary(1,4);var o=this.getRandomArbitrary(0,20)<10?n+a:n-a;o=c===o?this.getRandomArbitrary(0,20)<10?n+a:n-a:o,e.push(this.ceroIzq(this.verificarNum(o,i))),e.sort((function(e,t){return e+t}))}},{key:"ceroIzq",value:function(e){return e<10?"0"+e.toString():e.toString()}},{key:"verificarNum",value:function(e,t){var i=e;switch(t){case"dd":i=e<=0||e>31?this.getRandomArbitrary(1,28):e;break;case"mm":i=e<=0||e>12?this.getRandomArbitrary(1,12):e}return i}},{key:"getRandomArbitrary",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"verificarDNI",value:function(e){var t=this;this.listViewDate.map((function(e){return e.selected=!1})),e.selected=!0,this.isListDateSelect=!0,this.isDateBirthdayValid=e.fecha===this.dataCliente.date_of_birthday,this.isPaseOk=this.isDateBirthdayValid,this.isPaseOk?(this.verifyClientService.clientSocket.datalogin=this.dataCliente,this.verifyClientService.clientSocket.datalogin.sub="dni|"+this.dataCliente.number,this.verifyClientService.clientSocket.datalogin.name=this.dataCliente.names+" "+this.dataCliente.first_name+" "+this.dataCliente.last_name,this.verifyClientService.clientSocket.datalogin.given_name=this.dataCliente.names&&this.dataCliente.names.indexOf(" ")>0?this.dataCliente.names.split(" ")[0]:this.dataCliente.names,this.verifyClientService.setDataClient(),this.verifyClientService.setIsLoginByDNI(!0),this.auth.loggedIn=!0,setTimeout((function(){t.router.navigate(["/callback-auth"])}),2e3)):this.limpiarFrm()}}]),e}()).\u0275fac=function(e){return new(e||de)(s.Ob(f),s.Ob(o.b),s.Ob(l.a),s.Ob(d.a))},de.\u0275cmp=s.Ib({type:de,selectors:[["app-login-cliente"]],decls:3,vars:2,consts:[[1,"animated","fadeIn"],["class","text-center",4,"ngIf"],["class","animated fadeInUp",4,"ngIf"],[1,"text-center"],[1,"p-3","pt-5"],[1,"fs-18","fw-600"],[1,"p-3"],["matRipple","",1,"btn-social","fb",3,"click"],["aria-hidden","true",1,"fa","fa-facebook"],[1,"pl-2"],["matRipple","",1,"btn-social","gmail",3,"click"],["aria-hidden","true",1,"fa","fa-google"],["matRipple","",1,"btn-social","dni",3,"click"],["aria-hidden","true",1,"fa","fa-id-card-o"],[1,"animated","fadeInUp"],[1,"pr-5","pt-5","pl-5","pb-2",3,"click"],[1,"fa","fa-arrow-left","pr-2"],[1,"pr-5","pt-2","pl-5","pb-0"],[4,"ngIf"],["class","animated pulse",4,"ngIf"],[1,"w-100"],["matInput","","placeholder","DNI","maxlength","8","type","number",3,"keyup.enter"],["dni",""],["mat-flat-button","","color","primary","matSuffix","",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],["mode","indeterminate",2,"bottom","20px",3,"hidden"],[1,"fs-13","text-danger"],[1,"fs-13","fw-600"],[1,"fs-13","text-info"],[1,"div-list-date","text-center"],["matRipple","","class","item-list-date border-bottom",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-list-date","border-bottom",3,"ngClass","click"],[1,"animated","pulse"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"text-success","fs-20"],[1,"text-danger","fs-14"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Cc(1,te,19,0,"div",1),s.Cc(2,le,10,2,"div",2),s.Tb()),2&e&&(s.Cb(1),s.mc("ngIf",!t.isViewLoginDNI),s.Cb(1),s.mc("ngIf",t.isViewLoginDNI))},directives:[c.m,h.e,U.a,P.a,g.a,U.d,w.a,c.l,c.k],styles:[".div-list-date[_ngcontent-%COMP%]{padding:10px}.item-list-date[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.item-list-date.selected[_ngcontent-%COMP%]{background-attachment:#ffffe0}.btn-social[_ngcontent-%COMP%]{margin:15px;color:#fff;padding:10px;border-radius:5px}.btn-social.fb[_ngcontent-%COMP%]{background:#1e90ff}.btn-social.gmail[_ngcontent-%COMP%]{background:#d32f2f}.btn-social.dni[_ngcontent-%COMP%]{background:#5e35b1}"]}),de);function be(e,t){if(1&e){var i=s.Vb();s.Ub(0,"li",1),s.cc("click",(function(){s.wc(i);var e=t.$implicit;return s.gc().selected(e)})),s.Ub(1,"div",2),s.Ub(2,"p",3),s.Ec(3),s.Tb(),s.Ub(4,"p",4),s.Ec(5),s.Tb(),s.Tb(),s.Tb()}if(2&e){var n=t.$implicit;s.Cb(3),s.Fc(n.titulo),s.Cb(2),s.Fc(n.direccion)}}var fe,he=((fe=function(){function e(t,i){_classCallCheck(this,e),this.crudService=t,this.verifyClientService=i,this.direccionSelected=new s.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.infoClienteLogueado=this.verifyClientService.getDataClient(),this.loadDireccion()}},{key:"loadDireccion",value:function(){var e=this;this.crudService.postFree({idcliente:this.infoClienteLogueado.idcliente},"delivery","get-direccion-cliente",!1).subscribe((function(t){e.listDirecciones=t.data,1===e.listDirecciones.length&&null===e.infoClienteLogueado.direccionEnvioSelected&&e.direccionSelected.emit(e.listDirecciones[0])}))}},{key:"selected",value:function(e){this.direccionSelected.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||fe)(s.Ob(d.a),s.Ob(f))},fe.\u0275cmp=s.Ib({type:fe,selectors:[["app-seleccionar-direccion"]],outputs:{direccionSelected:"direccionSelected"},decls:2,vars:1,consts:[["class","li-item","matRipple","",3,"click",4,"ngFor","ngForOf"],["matRipple","",1,"li-item",3,"click"],[1,"p-3"],[1,"fw-600","fs-14"],[1,"fw-100","fs-13"]],template:function(e,t){1&e&&(s.Ub(0,"ul"),s.Cc(1,be,6,2,"li",0),s.Tb()),2&e&&(s.Cb(1),s.mc("ngForOf",t.listDirecciones))},directives:[c.l,h.e],styles:["p[_ngcontent-%COMP%]{margin-bottom:0}.li-item[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}"]}),fe),ge=function e(){_classCallCheck(this,e)},ve=i("pxUr"),me=i("QibW"),pe=["search"],Ce=["registerForm"];function ye(e,t){1&e&&s.Qb(0)}function ke(e,t){1&e&&s.Ec(0," Listo Guardar ")}function Se(e,t){1&e&&(s.Sb(0),s.Pb(1,"i",30),s.Ec(2," Guardando ... "),s.Rb())}function Te(e,t){1&e&&(s.Pb(0,"i",31),s.Ec(1," Hecho "))}function Ie(e,t){if(1&e&&(s.Cc(0,Se,3,0,"ng-container",28),s.Cc(1,Te,2,0,"ng-template",null,29,s.Dc)),2&e){var i=s.vc(2),n=s.gc();s.mc("ngIf",1===n.loader)("ngIfElse",i)}}var De,Ue,Pe,we,Oe=((De=function(){function e(t,i,n,a,c){_classCallCheck(this,e),this.formBuilder=t,this.mapsAPILoader=i,this.ngZone=n,this.verifyClientService=a,this.crudService=c,this.loader=0,this.dataMaps=new s.o,this.saveDireccionOk=new s.o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dataCliente=new ge,this.loadForm(),this.mapsAPILoader.load().then((function(){e.setCurrentLocation(),e.geoCoder=new google.maps.Geocoder;var t=new google.maps.places.Autocomplete(e.searchElementRef.nativeElement,{types:["address"],componentRestrictions:{country:"pe"}});t.addListener("place_changed",(function(){e.ngZone.run((function(){var i=t.getPlace();null!=i.geometry&&(e.latitude=i.geometry.location.lat(),e.longitude=i.geometry.location.lng(),e.zoom=15)}))}))}))}},{key:"setCurrentLocation",value:function(){var e=this;"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude,e.zoom=16,e.getAddress(e.latitude,e.longitude)}))}},{key:"markerDragEnd",value:function(e){this.latitude=e.coords.lat,this.longitude=e.coords.lng,this.getAddress(this.latitude,this.longitude)}},{key:"getAddress",value:function(e,t){var i=this;this.geoCoder.geocode({location:{lat:e,lng:t}},(function(e,t){"OK"===t?e[0]?(i.zoom=15,i.address=e[0].formatted_address,i.dataCliente.direccion=i.address,i.dataMapa=e[0]):window.alert("No results found"):window.alert("Geocoder failed due to: "+t)}))}},{key:"loadForm",value:function(){var e=this;this.registerForm=this.formBuilder.group({direccion:["",D.p.required],referencia:[this.dataCliente.referencia,D.p.required],longitude:[this.longitude,D.p.required],latitude:[this.latitude,D.p.required],titulo:this.dataCliente.titulo||""}),this.registerForm.statusChanges.subscribe((function(t){"VALID"===t&&e.guardarDireccion()}))}},{key:"checkDireccion",value:function(e){""===e.trim()&&(this.longitude=null,this.latitude=null)}},{key:"guardarDireccion",value:function(){this.dataCliente.idcliente=this.verifyClientService.getDataClient().idcliente,this.dataCliente.longitude=this.longitude,this.dataCliente.latitude=this.latitude,this.dataCliente.ciudad=this.searchTypeMap("locality"),this.dataCliente.provincia=this.searchTypeMap("administrative_area_level_2"),this.dataCliente.departamento=this.searchTypeMap("administrative_area_level_1"),this.dataCliente.pais=this.searchTypeMap("country"),this.dataCliente.codigo=this.searchTypeMap("postal_code")}},{key:"saveDireccion",value:function(){var e=this;this.loader=1,this.crudService.postFree(this.dataCliente,"cliente","new-direccion",!1).subscribe((function(t){setTimeout((function(){e.loader=2,setTimeout((function(){e.dataCliente.idcliente_pwa_direccion=t.data[0].idcliente_pwa_direccion,e.saveDireccionOk.emit(e.dataCliente)}),500)}),1e3),console.log(t)}))}},{key:"searchTypeMap",value:function(e){var t="";return this.dataMapa.address_components.map((function(i){i.types.map((function(n){if(n===e)return t=i.long_name}))})),t}}]),e}()).\u0275fac=function(e){return new(e||De)(s.Ob(D.c),s.Ob(ve.d),s.Ob(s.A),s.Ob(f),s.Ob(d.a))},De.\u0275cmp=s.Ib({type:De,selectors:[["app-agregar-direccion"]],viewQuery:function(e,t){var i;1&e&&(s.Jc(pe,!0),s.Jc(Ce,!0)),2&e&&(s.uc(i=s.dc())&&(t.searchElementRef=i.first),s.uc(i=s.dc())&&(t.myForm=i.first))},outputs:{dataMaps:"dataMaps",saveDireccionOk:"saveDireccionOk"},decls:45,vars:16,consts:[[1,"bg-warning","pt-3","pr-3","pl-3","p-1"],[1,"fs-13"],[3,"formGroup"],[1,"w-100"],[1,"p-3"],["matInput","","placeholder","Direccion","formControlName","direccion","autocorrect","off","autocapitalize","off","spellcheck","off","type","text","id","search",1,"input-headline",3,"ngModel","ngModelChange","keydown.enter","keyup"],["search",""],["matInput","","placeholder","Referencia / piso / oficina","formControlName","referencia",1,"input-headline",3,"ngModel","ngModelChange"],["hidden","true"],["matInput","","placeholder","Referencia / piso / oficina","formControlName","longitude",1,"input-headline",3,"ngModel","ngModelChange"],["matInput","","placeholder","Referencia / piso / oficina","formControlName","latitude",1,"input-headline",3,"ngModel","ngModelChange"],[1,"border"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],[1,"fw-600","fs-13"],[1,"fs-13",3,"ngModel","ngModelChange"],["radioGroup","matRadioGroup"],["checked","","value","Casa",1,"pr-3"],["value","Trabajo",1,"pr-3"],["value","Novi@",1,"pr-3"],["value","Otro",1,"pr-3"],[1,"text-center","pb-3"],["mat-flat-button","","mat-dialog-close","",1,"mr-3"],[1,"fa","fa-arrow-left"],["mat-flat-button","","color","primary",3,"disabled","click"],[4,"ngIf","ngIfThen","ngIfElse"],["thenTemplate",""],["elseTemplate",""],[4,"ngIf","ngIfElse"],["elseTemplateHecho",""],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-check"]],template:function(e,t){if(1&e){var i=s.Vb();s.Ub(0,"div",0),s.Ub(1,"p",1),s.Ec(2,"Indique la direccion exacta de entrega. "),s.Ub(3,"strong"),s.Ec(4,"Se tomara como referencia el punto que especifica en el mapa."),s.Tb(),s.Tb(),s.Tb(),s.Ub(5,"div"),s.Ub(6,"form",2),s.Ub(7,"div",3),s.Ub(8,"div",4),s.Ub(9,"mat-form-field",3),s.Ub(10,"input",5,6),s.cc("ngModelChange",(function(e){return t.dataCliente.direccion=e}))("keydown.enter",(function(e){return e.preventDefault()}))("keyup",(function(){s.wc(i);var e=s.vc(11);return t.checkDireccion(e.value)})),s.Tb(),s.Tb(),s.Ub(12,"mat-form-field",3),s.Ub(13,"input",7),s.cc("ngModelChange",(function(e){return t.dataCliente.referencia=e})),s.Tb(),s.Tb(),s.Ub(14,"div",8),s.Ub(15,"mat-form-field",3),s.Ub(16,"input",9),s.cc("ngModelChange",(function(e){return t.longitude=e})),s.Tb(),s.Tb(),s.Ub(17,"mat-form-field",3),s.Ub(18,"input",10),s.cc("ngModelChange",(function(e){return t.latitude=e})),s.Tb(),s.Tb(),s.Tb(),s.Ub(19,"div",11),s.Ub(20,"agm-map",12),s.Ub(21,"agm-marker",13),s.cc("dragEnd",(function(e){return t.markerDragEnd(e)})),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(22,"div",4),s.Ub(23,"p",14),s.Ec(24,"Esta es la direcci\xf3n de mi:"),s.Tb(),s.Ub(25,"mat-radio-group",15,16),s.cc("ngModelChange",(function(e){return t.dataCliente.titulo=e})),s.Ub(27,"mat-radio-button",17),s.Ec(28,"Casa"),s.Tb(),s.Ub(29,"mat-radio-button",18),s.Ec(30,"Trabajo"),s.Tb(),s.Ub(31,"mat-radio-button",19),s.Ec(32,"Novi@"),s.Tb(),s.Ub(33,"mat-radio-button",20),s.Ec(34,"Otro"),s.Tb(),s.Tb(),s.Tb(),s.Ub(35,"div",21),s.Ub(36,"button",22),s.Pb(37,"i",23),s.Ec(38," Atras "),s.Tb(),s.Ub(39,"button",24),s.cc("click",(function(){return t.saveDireccion()})),s.Cc(40,ye,1,0,"ng-container",25),s.Cc(41,ke,1,0,"ng-template",null,26,s.Dc),s.Cc(43,Ie,3,2,"ng-template",null,27,s.Dc),s.Tb(),s.Tb(),s.Tb()}if(2&e){var n=s.vc(42),a=s.vc(44);s.Cb(6),s.mc("formGroup",t.registerForm),s.Cb(4),s.mc("ngModel",t.dataCliente.direccion),s.Cb(3),s.mc("ngModel",t.dataCliente.referencia),s.Cb(3),s.mc("ngModel",t.longitude),s.Cb(2),s.mc("ngModel",t.latitude),s.Cb(2),s.mc("latitude",t.latitude)("longitude",t.longitude)("zoom",t.zoom),s.Cb(1),s.mc("latitude",t.latitude)("longitude",t.longitude)("markerDraggable",!0),s.Cb(4),s.mc("ngModel",t.dataCliente.titulo),s.Cb(14),s.mc("disabled",!t.registerForm.valid||t.loader>0),s.Cb(1),s.mc("ngIf",0===t.loader)("ngIfThen",n)("ngIfElse",a)}},directives:[D.q,D.k,D.e,U.a,P.a,D.b,D.j,D.d,ve.b,ve.c,me.b,D.m,me.a,g.a,x.c,c.m],styles:["agm-map[_ngcontent-%COMP%]{height:200px}.input-headline[_ngcontent-%COMP%]{font-size:13px;line-height:13px}"]}),De),xe=function(){return["../"]},_e=[{path:"",component:r,data:{titulo:"Inicio"},children:[{path:"",redirectTo:"inicio"},{path:"inicio",component:k,data:{titulo:"Inicio"}},{path:"login-personal-autorizado",component:O,data:{titulo:"Login Personal Autorizado"}},{path:"lector-qr",component:z,data:{titulo:"Lector QR"}},{path:"lector-success",component:X,canActivate:[ee],data:{titulo:"Lector QR"}},{path:"login-client",component:ue,canActivate:[ee],data:{titulo:"Loguear"}},{path:"callback-auth",canActivate:[ee],component:W,data:{titulo:"Callback Auth"}},{path:"direccion-delivery",component:(Ue=function(){function e(t,i){_classCallCheck(this,e),this.router=t,this.verifyClientService=i,this.isFormValid=!1,this.loader=0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"setDireccion",value:function(e){this.verifyClientService.setDireccionDeliverySelected(e),this.goZonaEstablecimiento()}},{key:"goZonaEstablecimiento",value:function(){this.router.navigate(["/zona-delivery"])}}]),e}(),Ue.\u0275fac=function(e){return new(e||Ue)(s.Ob(o.b),s.Ob(f))},Ue.\u0275cmp=s.Ib({type:Ue,selectors:[["app-seleccionar-ubicacion-delivery"]],decls:9,vars:2,consts:[[1,"animated","fadeIn"],[1,"header-app","p-3"],[1,"fa","fa-arrow-left",3,"routerLink"],[1,"pl-2"],[3,"direccionSelected"],[3,"saveDireccionOk"]],template:function(e,t){1&e&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Pb(2,"i",2),s.Ub(3,"span",3),s.Ec(4,"Direccion de entrega"),s.Tb(),s.Tb(),s.Ub(5,"div"),s.Ub(6,"app-seleccionar-direccion",4),s.cc("direccionSelected",(function(e){return t.setDireccion(e)})),s.Tb(),s.Tb(),s.Ub(7,"div"),s.Ub(8,"app-agregar-direccion",5),s.cc("saveDireccionOk",(function(e){return t.setDireccion(e)})),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.Cb(2),s.mc("routerLink",s.qc(1,xe)))},directives:[o.c,he,Oe],styles:["agm-map[_ngcontent-%COMP%]{height:300px}"]}),Ue),data:{titulo:"Seleccionar Direccion"}}]}],Me=((Pe=function e(){_classCallCheck(this,e)}).\u0275mod=s.Mb({type:Pe}),Pe.\u0275inj=s.Lb({factory:function(e){return new(e||Pe)},imports:[[o.d.forChild(_e)],o.d]}),Pe),Le=i("rsRi"),Ee=i("lSLK"),Re=((we=function e(){_classCallCheck(this,e)}).\u0275mod=s.Mb({type:we}),we.\u0275inj=s.Lb({factory:function(e){return new(e||we)},imports:[[c.c,D.f,Me,Le.a,Ee.a,L.b]]}),we)}}]);