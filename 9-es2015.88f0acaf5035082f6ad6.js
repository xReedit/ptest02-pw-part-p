(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{DdEe:function(e,t,i){"use strict";i.r(t),i.d(t,"InicioModule",(function(){return Se}));var n=i("ofXK"),s=i("tyNb"),a=i("fXoL");let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["app-main"]],decls:1,vars:0,template:function(e,t){1&e&&a.Pb(0,"router-outlet")},directives:[s.e],styles:[""]}),e})();var c=i("P3BU"),r=i("+lji"),l=i("ds6q");class d{}let b=(()=>{class e{constructor(e,t){this.auth=e,this.crudService=t,this.subjectClient=new l.Subject,this.isClientValid=!1}isLogin(){return this.auth.loggedIn}setIdOrg(e){this.clientSocket.idorg=e,this.setDataClient()}setIdSede(e){this.clientSocket.idsede=e,this.setDataClient()}setMesa(e){this.clientSocket.numMesaLector=e,this.setDataClient()}setIsSoloLLevar(e){this.clientSocket.isSoloLLevar=e,this.setDataClient()}setQrSuccess(e){this.clientSocket.isQrSuccess=e,this.setDataClient()}setIsDelivery(e){this.clientSocket.isDelivery=e,this.setDataClient()}setDireccionDeliverySelected(e){this.clientSocket.direccionEnvioSelected=e,this.setDataClient()}setIsLoginByDNI(e){this.clientSocket.isLoginByDNI=e,this.setDataClient()}setTelefono(e){this.clientSocket.telefono=e,this.setDataClient()}getIsLoginByDNI(){return this.clientSocket||this.getDataClient(),this.clientSocket.isLoginByDNI||!1}getIsQrSuccess(){return this.clientSocket||this.getDataClient(),this.clientSocket.isQrSuccess||!1}getIsDelivery(){return this.clientSocket||this.getDataClient(),this.clientSocket.isDelivery||!1}verifyClient(){return this.getDataClient(),this.clientSocket.isLoginByDNI?(this.registerCliente(),this.subjectClient.asObservable()):(this.auth.userProfile$.subscribe(e=>{e?(this.clientSocket.datalogin=e,this.setDataClient(),this.registerCliente()):this.subjectClient.next(null)},e=>{console.log(e)},()=>{console.log("complete")}),this.subjectClient.asObservable())}registerCliente(){let e=0;this.crudService.postFree(this.clientSocket,"ini","register-cliente-login",!1).subscribe(t=>{e=t.data[0].idcliente,this.clientSocket.idcliente=e,this.clientSocket.nombres=this.clientSocket.datalogin.name,this.clientSocket.usuario=this.clientSocket.datalogin.given_name,this.clientSocket.isCliente=!0,this.clientSocket.telefono=t.data[0].telefono,this.clientSocket.efectivoMano=0,this.setDataClient(),this.subjectClient.next(this.clientSocket)})}setDataClient(){const e=JSON.stringify(this.clientSocket);localStorage.setItem("sys::tpm",btoa(e))}getDataClient(){const e=localStorage.getItem("sys::tpm");return this.clientSocket=e?JSON.parse(atob(e)):new d,this.clientSocket}loginOut(){this.auth.logout(),localStorage.removeItem("sys::tpm")}unsubscribeClient(){this.subjectClient.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Yb(c.a),a.Yb(r.a))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i("FKr1"),u=i("bTqV");function g(e,t){if(1&e&&(a.Ub(0,"div",22),a.Pb(1,"hr"),a.Ub(2,"p",23),a.Ec(3,"Hola "),a.Ub(4,"strong"),a.Ec(5),a.Tb(),a.Ec(6,", que quieres pedir hoy?"),a.Tb(),a.Tb()),2&e){const e=a.gc();a.Cb(5),a.Fc(e.nombreClientSocket)}}const m=function(){return["/login-personal-autorizado"]};let f=(()=>{class e{constructor(e,t){this.verifyClientService=e,this.router=t,this.veryfyClient=null,this.isLogin=!1,this.nombreClientSocket=""}ngOnInit(){this.nombreClientSocket="",screen.orientation.unlock(),localStorage.clear()}loadInit(){this.verifyClientService.getDataClient(),this.verifyClientService.setQrSuccess(!1),this.verifyClientService.setIsDelivery(!1),this.verifyClientService.setDireccionDeliverySelected(null),this.isLogin=this.verifyClientService.isLogin(),this.verifyClientService.setMesa(null),this.verifyClientService.setIdOrg(null),this.verifyClientService.setIdSede(null),this.veryfyClient=this.verifyClientService.verifyClient().subscribe(e=>{this.nombreClientSocket=e.usuario,this.isLogin=!!this.verifyClientService.getIsLoginByDNI()||this.verifyClientService.isLogin(),this.verifyClientService.setQrSuccess(!1)})}ngOnDestroy(){}cerrarSession(){this.verifyClientService.loginOut()}showClienteProfile(){this.isLogin&&this.router.navigate(["/cliente-profile"])}showDelivery(){this.isLogin?this.router.navigate(["./zona-delivery"]):(this.verifyClientService.setIsDelivery(!0),this.router.navigate(["/login-client"]))}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b),a.Ob(s.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-inicio"]],decls:34,vars:3,consts:[[1,"text-center","container-ini"],[1,"container-body"],[1,"header"],[1,"inner-header","flex"],["src","assets/images/papaya_text-white.png","width","190px"],[1,"fs-12"],["viewBox","0 24 150 28","preserveAspectRatio","none","shape-rendering","auto",1,"waves"],["id","gentle-wave","d","M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"],[1,"parallax"],[0,"xlink","href","#gentle-wave","x","48","y","0","fill","rgba(255,255,255,0.7"],[0,"xlink","href","#gentle-wave","x","48","y","3","fill","rgba(255,255,255,0.5)"],[0,"xlink","href","#gentle-wave","x","48","y","5","fill","rgba(255,255,255,0.3)"],[0,"xlink","href","#gentle-wave","x","48","y","7","fill","#fff"],[1,"text-center","pl-4","pr-4"],["src","assets/images/img-ini.png","alt","ini",2,"max-width","320px","width","100%"],[1,"fs-14",2,"color","#616161"],["class","border-bottom","style","background: blanchedalmond;",4,"ngIf"],["matRipple","",1,"p-3","border-bottom","border-top",3,"routerLink"],["src","assets/images/btn-login.png","alt","btn-scan"],[1,"pl-2"],[1,"xfooter","bg-white"],["mat-button","","color","primary"],[1,"border-bottom",2,"background","blanchedalmond"],[1,"fs-13"]],template:function(e,t){1&e&&(a.Ub(0,"div"),a.Ub(1,"div",0),a.Ub(2,"div",1),a.Ub(3,"div",2),a.Ub(4,"div",3),a.Pb(5,"br"),a.Ub(6,"div"),a.Pb(7,"img",4),a.Ub(8,"p"),a.Ec(9,"Repartidor "),a.Ub(10,"span",5),a.Ec(11,"v.1e"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(12,"div"),a.fc(),a.Ub(13,"svg",6),a.Ub(14,"defs"),a.Pb(15,"path",7),a.Tb(),a.Ub(16,"g",8),a.Pb(17,"use",9),a.Pb(18,"use",10),a.Pb(19,"use",11),a.Pb(20,"use",12),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.ec(),a.Ub(21,"div",13),a.Pb(22,"img",14),a.Ub(23,"p",15),a.Ec(24,"Gana dinero con cada entrega que hagas, \xa1no hay l\xedmites de ganancia!."),a.Tb(),a.Tb(),a.Cc(25,g,7,1,"div",16),a.Pb(26,"br"),a.Ub(27,"div",17),a.Pb(28,"img",18),a.Ub(29,"span",19),a.Ec(30,"Ingresar"),a.Tb(),a.Tb(),a.Ub(31,"div",20),a.Ub(32,"button",21),a.Ec(33,"Solicitar Resgistro"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(25),a.mc("ngIf",t.isLogin),a.Cb(2),a.mc("routerLink",a.qc(2,m)))},directives:[n.m,h.e,s.c,u.a],styles:[".container-ini[_ngcontent-%COMP%]{position:relative;min-height:100vh}.container-body[_ngcontent-%COMP%]{padding-bottom:3.5rem}.xfooter[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;padding:20px}"]}),e})();class p{}var v=i("IYfF"),C=i("zOUh"),S=i("3Pt+"),y=i("kmnG"),T=i("qFsG"),I=i("bv9b");let D=(()=>{class e{constructor(e,t,i){this.router=e,this.authService=t,this.infoToken=i,this.loading=!1,this.msjErr=!1}ngOnInit(){this.usuario=new p}logear(){this.loading=!0,this.msjErr=!1,this.usuario.op=1,console.log("this.usuario",this.usuario),this.authService.setLocalToken(""),this.authService.getUserLogged(this.usuario).subscribe(e=>{setTimeout(()=>{console.log("res"),e.success?(this.authService.setTokenAuth(e.token),this.authService.getInfoRepartidor(e.usuario).subscribe(e=>{this.authService.setLocalToken(e),this.authService.setLoggedStatus(!0),this.authService.setLocalUsuario(this.usuario),this.infoToken.converToJSON(),this.router.navigate(["./main-inicio"])})):(this.loading=!1,this.msjErr=!0)},2e3)})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(s.b),a.Ob(v.a),a.Ob(C.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-login-personal-autorizado"]],decls:24,vars:5,consts:[[1,"text-center","animated","fadeIn"],["src","assets/images/img-ini.png","alt","..",2,"max-width","300px"],[1,"text-center","ml-5","mr-5"],["src","assets/images/papaya_text-2.png","width","160px"],[1,"fs-16","fw-100","text-secondary"],[1,"content-login-us",3,"ngSubmit"],["frmpass","ngForm"],[1,"row"],[1,"col-sm-6"],[1,"w-100"],["matInput","","placeholder","Usuario","name","nomusuario","required","",3,"ngModel","ngModelChange"],["matInput","","type","password","name","pass","placeholder","Clave","required","",3,"ngModel","ngModelChange"],[1,"text-center"],["mode","indeterminate",3,"hidden"],[1,"fs-14","font-weight-bold","text-danger","animated","flash",3,"hidden"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(e,t){if(1&e&&(a.Ub(0,"div",0),a.Pb(1,"br"),a.Pb(2,"img",1),a.Ub(3,"div",2),a.Pb(4,"img",3),a.Ub(5,"p",4),a.Ec(6,"Repartidor Autorizado"),a.Tb(),a.Ub(7,"form",5,6),a.cc("ngSubmit",(function(){return t.logear()})),a.Ub(9,"div",7),a.Ub(10,"div",8),a.Ub(11,"mat-form-field",9),a.Ub(12,"input",10),a.cc("ngModelChange",(function(e){return t.usuario.nomusuario=e})),a.Tb(),a.Tb(),a.Tb(),a.Ub(13,"div",8),a.Ub(14,"mat-form-field",9),a.Ub(15,"input",11),a.cc("ngModelChange",(function(e){return t.usuario.pass=e})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(16,"div",12),a.Pb(17,"mat-progress-bar",13),a.Ub(18,"span",14),a.Ec(19,"Credenciales Incorrectas."),a.Tb(),a.Tb(),a.Pb(20,"hr"),a.Ub(21,"div",12),a.Ub(22,"button",15),a.Ec(23,"Listo, Ingresar"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&e){const e=a.vc(8);a.Cb(12),a.mc("ngModel",t.usuario.nomusuario),a.Cb(3),a.mc("ngModel",t.usuario.pass),a.Cb(2),a.mc("hidden",!t.loading),a.Cb(1),a.mc("hidden",!t.msjErr),a.Cb(4),a.mc("disabled",!e.valid)}},directives:[S.q,S.k,S.l,y.a,T.a,S.b,S.o,S.j,S.m,I.a,u.a],styles:[".content-login-us[_ngcontent-%COMP%]{background:#eee;border-radius:5px;padding:15px}"]}),e})();var U=i("0IaG"),k=i("VhxH");let P=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.hasPermissionPosition=!0,this.cLocal=t.cLocal}ngOnInit(){this.loadGPS()}loadGPS(){setTimeout(()=>{this.getPosition()},4e3)}getPosition(){navigator.geolocation.getCurrentPosition(e=>{this.cDispositivo={lat:e.coords.latitude,lng:e.coords.longitude},this.hasPermissionPosition=!0,this.data.posIssValid=!!this.data.isDemo||this.arePointsNear(this.cLocal,this.cDispositivo,1),this.cerrarDlg()},this.showPositionError)}showPositionError(e){this.hasPermissionPosition=!1,this.data.posIssValid=!1,this.cerrarDlg()}arePointsNear(e,t,i){const n={lat:t.lat,lon:t.lng};return Object(k.insideCircle)({lat:e.lat,lon:e.lng},n,65)}cerrarDlg(){this.dialogRef.close(this.data.posIssValid)}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(U.f),a.Ob(U.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-dialog-ubicacion"]],decls:4,vars:0,consts:[[1,"text-center","p-3"],[1,"fa","fa-map-marker","fa-2x"],[1,"fs-20"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Pb(1,"i",1),a.Ub(2,"p",2),a.Ec(3,"Verificando su ubicaci\xf3n."),a.Tb(),a.Tb())},styles:[""]}),e})();var w=i("IyRd");function O(e,t){1&e&&(a.Ub(0,"div"),a.Ub(1,"p",8),a.Ec(2,"Es necesario que active la ubicaci\xf3n de su telefono "),a.Pb(3,"i",9),a.Tb(),a.Pb(4,"br"),a.Tb())}function x(e,t){1&e&&(a.Ub(0,"p",10),a.Ec(1,"Obteniendo Camara..."),a.Tb())}function M(e,t){1&e&&a.Pb(0,"div",11)}function L(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",12),a.cc("click",(function(){return a.wc(e),a.gc(2).onDeviceSelectChange()})),a.Pb(1,"i",13),a.Ub(2,"span",14),a.Ec(3,"Rotar"),a.Tb(),a.Tb()}}function E(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",3),a.Cc(1,O,5,0,"div",2),a.Ub(2,"p"),a.Ec(3,"Scanear codigo"),a.Tb(),a.Cc(4,x,2,0,"p",4),a.Ub(5,"zxing-scanner",5),a.cc("deviceChange",(function(t){return a.wc(e),a.gc().currentDevice=t}))("camerasFound",(function(t){return a.wc(e),a.gc().onCamerasFound(t)}))("permissionResponse",(function(t){return a.wc(e),a.gc().onHasPermission(t)}))("scanSuccess",(function(t){return a.wc(e),a.gc().scanSuccessHandler(t)})),a.Tb(),a.Cc(6,M,1,0,"div",6),a.Pb(7,"br"),a.Cc(8,L,4,0,"button",7),a.Tb()}if(2&e){const e=a.gc();a.Cb(1),a.mc("ngIf",!e.hasPermissionPosition),a.Cb(3),a.mc("ngIf",!e.isCameraReady),a.Cb(1),a.mc("device",e.currentDevice),a.Cb(1),a.mc("ngIf",e.isCameraReady),a.Cb(2),a.mc("ngIf",e.isOptionChangeCamera)}}function _(e,t){1&e&&(a.Sb(0),a.Ub(1,"p"),a.Ec(2,"Obteniendo datos ..."),a.Tb(),a.Pb(3,"mat-progress-bar",22),a.Rb())}function R(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",23),a.Ub(1,"p",24),a.Ec(2,"Codigo no valido."),a.Tb(),a.Tb(),a.Pb(3,"br"),a.Ub(4,"button",20),a.cc("click",(function(){return a.wc(e),a.gc(2).volverALeer()})),a.Pb(5,"i",25),a.Ec(6," Intentar nuevamente."),a.Tb()}}function V(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div"),a.Ub(1,"div",15),a.Cc(2,_,4,0,"ng-container",16),a.Cc(3,R,7,0,"ng-template",null,17,a.Dc),a.Ub(5,"div",18),a.Pb(6,"br"),a.Ub(7,"p",19),a.Ec(8,"Se requiere que acepte los permisos."),a.Tb(),a.Ub(9,"button",20),a.cc("click",(function(){return a.wc(e),a.gc().getPosition()})),a.Pb(10,"i",21),a.Ec(11," Intentar nuevamente."),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.vc(4),t=a.gc();a.Cb(2),a.mc("ngIf",t.isCodigoQrValido)("ngIfElse",e),a.Cb(3),a.mc("hidden",t.hasPermissionPosition)}}let F=(()=>{class e{constructor(e,t,i,n){this.verifyClientService=e,this.crudService=t,this.dialog=i,this.router=n,this.codQR="",this.hasPermission=!0,this.hasPermissionPosition=!0,this.isProcesando=!1,this.currentDevice=null,this.indexSelectCamera=0,this.isOptionChangeCamera=!1,this.isCodigoQrValido=!0,this.isCameraReady=!1,this.isSedeRequiereGPS=!1,this.isSoloLLevar=!1,this.isDemo=!1}ngOnInit(){}ngOnDestroy(){this.currentDevice=null}scanSuccessHandler(e){this.codQR=e,this.isProcesando=!0,this.leerDatosQR()}onHasPermission(e){this.hasPermission=e}showPositionError(e){this.hasPermissionPosition=!1}onCamerasFound(e){this.availableDevices=e,this.hasDevices=Boolean(e&&e.length),this.indexSelectCamera=e.length-1,this.isOptionChangeCamera=this.indexSelectCamera>0,this.deviceSelectChange()}onDeviceSelectChange(){this.isCameraReady=!1,this.indexSelectCamera=this.indexSelectCamera===this.availableDevices.length-1?0:this.indexSelectCamera+1,this.deviceSelectChange()}deviceSelectChange(){this.currentDevice=this.availableDevices[this.indexSelectCamera]||null,setTimeout(()=>{this.isCameraReady=!0},1e3)}leerDatosQR(){this.isCodigoQrValido=!0;let e=[];try{e=atob(this.codQR).split("::")}catch(a){return void this.resValidQR(!1)}const t="keyQrPwa"===e[0];if(t||(this.isDemo="keyQrPwaDemo"===e[0]),!t&&!this.isDemo)return void this.resValidQR(t);const i=e[1].split("|"),n=i[0],s=i[2];this.isSoloLLevar="-1"===n,this.crudService.postFree({idsede:s},"ini","info-sede-gps",!1).subscribe(e=>{this.isSedeRequiereGPS="0"!==e.data[0].pwa_requiere_gps,this.isSedeRequiereGPS=!!this.isSoloLLevar||this.isSedeRequiereGPS,this.isSoloLLevar||this.verifyClientService.setMesa(n),this.verifyClientService.getDataClient(),this.verifyClientService.setIdSede(s),this.verifyClientService.setQrSuccess(!0),this.verifyClientService.setIsSoloLLevar(this.isSoloLLevar);const t=i[1].split(":"),a={lat:parseFloat(t[0]),lng:parseFloat(t[1])};this.isSedeRequiereGPS?this.openDialogPOS(a):this.resValidQR(!0)})}openDialogPOS(e){let t=!1;const i=new U.d;i.disableClose=!0,i.hasBackdrop=!0,i.data={cLocal:e,isDemo:this.isDemo},this.dialog.open(P,i).afterClosed().subscribe(e=>{e||(t=!1),t=e,this.resValidQR(t)})}resValidQR(e){e?setTimeout(()=>{this.router.navigate(["/lector-success"])},1e3):this.isCodigoQrValido=!1}volverALeer(){this.isProcesando=!1,this.isCodigoQrValido=!0}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b),a.Ob(r.a),a.Ob(U.b),a.Ob(s.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-lector-codigo-qr"]],decls:3,vars:2,consts:[[1,"container-scan","animated","fadeIn"],["class","video text-center",4,"ngIf"],[4,"ngIf"],[1,"video","text-center"],["class","fw-100",4,"ngIf"],[1,"video-scan",3,"device","deviceChange","camerasFound","permissionResponse","scanSuccess"],["class","linea-scan",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],[1,"text-danger","fs-14"],[1,"fa","fa-map-marker"],[1,"fw-100"],[1,"linea-scan"],["mat-button","",3,"click"],["aria-hidden","true",1,"fa","fa-undo"],[1,"pl-2"],[1,"text-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"hidden"],[1,"text-info"],["mat-stroked-button","",3,"click"],["aria-hidden","true",1,"fa","fa-map-marker"],["mode","indeterminate"],[1,"animated","pulse"],[1,"text-danger"],["aria-hidden","true",1,"fa","fa-arrow-left"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Cc(1,E,9,5,"div",1),a.Cc(2,V,12,3,"div",2),a.Tb()),2&e&&(a.Cb(1),a.mc("ngIf",!t.isProcesando),a.Cb(1),a.mc("ngIf",t.isProcesando))},directives:[n.m,w.a,u.a,I.a],styles:["[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%]  video{max-width:300px;max-height:225px}.container-scan[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;background:hsla(0,0%,62%,.31)}.container-scan[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%], .video-scan[_ngcontent-%COMP%]{max-width:300px}.video-scan[_ngcontent-%COMP%]{max-height:225px}.linea-scan[_ngcontent-%COMP%]{height:20px;background:rgba(0,230,118,.5);position:relative;-webkit-animation:updown 3s infinite;animation:updown 3s infinite}@-webkit-keyframes updown{0%{bottom:15px}50%{bottom:235px}to{bottom:15px}}@keyframes updown{0%{bottom:15px}50%{bottom:235px}to{bottom:15px}}"]}),e})();function N(e,t){if(1&e&&(a.Ub(0,"div",15),a.Ub(1,"h2",16),a.Ec(2),a.hc(3,"number"),a.Tb(),a.Tb()),2&e){const e=a.gc(2);a.Cb(2),a.Fc(a.jc(3,1,e.numMesa,"2."))}}function q(e,t){1&e&&(a.Ub(0,"div"),a.Pb(1,"img",17),a.Tb())}function A(e,t){if(1&e&&(a.Ub(0,"div",22),a.Ub(1,"div",13),a.Pb(2,"img",23),a.Tb(),a.Ub(3,"p",10),a.Ec(4),a.Tb(),a.Tb()),2&e){const e=t.$implicit;a.Cb(2),a.oc("src","/assets/images/",e.img,"",a.xc),a.Cb(2),a.Fc(e.descripcion)}}function Q(e,t){if(1&e&&(a.Ub(0,"div",18),a.Ub(1,"p",19),a.Ec(2,"Informaci\xf3n B\xe1sica"),a.Tb(),a.Ub(3,"div",20),a.Cc(4,A,5,2,"div",21),a.Tb(),a.Tb()),2&e){const e=a.gc(2);a.Cb(4),a.mc("ngForOf",e.listReglas)}}function z(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",1),a.Ub(1,"div",2),a.Ub(2,"div",3),a.Ub(3,"div",4),a.Cc(4,N,4,4,"div",5),a.Cc(5,q,2,0,"div",6),a.Tb(),a.Tb(),a.Ub(6,"div",7),a.Ub(7,"p",8),a.Ec(8),a.Tb(),a.Ub(9,"p",9),a.Ec(10),a.Tb(),a.Ub(11,"p",10),a.Ec(12),a.Tb(),a.Tb(),a.Pb(13,"hr"),a.Cc(14,Q,5,1,"div",11),a.Tb(),a.Ub(15,"footer"),a.Ub(16,"div",12),a.cc("click",(function(){return a.wc(e),a.gc().listoEmpezar()})),a.Ub(17,"p"),a.Ub(18,"span",13),a.Ec(19,"Listo Empezar"),a.Tb(),a.Pb(20,"i",14),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.gc();a.Cb(4),a.mc("ngIf",e.numMesa>0),a.Cb(1),a.mc("ngIf",e.usLog.isSoloLLevar),a.Cb(3),a.Fc(e.dataSede.nombre),a.Cb(2),a.Fc(e.dataSede.eslogan),a.Cb(2),a.Fc(e.dataSede.pwa_msj_ini),a.Cb(2),a.mc("ngIf",e.listReglas)}}let j=(()=>{class e{constructor(e,t,i,n){this.crudService=e,this.verifyClientService=t,this.auth=i,this.router=n,this.numMesa=0}ngOnInit(){this.loadDataIni()}loadDataIni(){this.usLog=this.verifyClientService.getDataClient();const e={idsede:this.usLog.idsede};this.numMesa=this.usLog.numMesaLector,console.log(this.usLog),this.crudService.postFree(e,"ini","info-sede",!1).subscribe(e=>{this.dataSede=e.data[0],this.verifyClientService.getDataClient(),this.verifyClientService.setIdOrg(this.dataSede.idorg),this.verifyClientService.setIdSede(this.dataSede.idsede),this.crudService.getAll("ini","reglas-app",!1,!1,!1).subscribe(e=>{this.listReglas=e.data.map(e=>(e.descripcion=e.descripcion.replace("?",this.dataSede.pwa_time_limit),e))})})}listoEmpezar(){this.auth.loggedIn||this.verifyClientService.getIsLoginByDNI()?this.router.navigate(["/callback-auth"]):this.router.navigate(["/login-client"])}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(b),a.Ob(c.a),a.Ob(s.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-lector-success"]],decls:1,vars:1,consts:[["class","animated fadeIn text-center",4,"ngIf"],[1,"animated","fadeIn","text-center"],[1,"content-body"],[1,"pt-3","pb-2","border-bottom","fondo-beige"],[1,"text-center","d-inline"],["class","content-num-mesa",4,"ngIf"],[4,"ngIf"],[1,"info-establecimiento-content","pt-3"],[1,"fs-20"],[1,"fw-100","fs-12","pb-2"],[1,"fw-100","fs-13"],["class","pl-3 pr-3 mb-4 animated fadeInUp",4,"ngIf"],["matRipple","",1,"content-ready",3,"click"],[1,"pr-2"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"content-num-mesa"],[1,"num-mesa"],["src","/assets/images/solo-llevar.png"],[1,"pl-3","pr-3","mb-4","animated","fadeInUp"],[1,"pb-2"],[1,"text-left"],["class","d-flex p-1 mb-3",4,"ngFor","ngForOf"],[1,"d-flex","p-1","mb-3"],["alt","i1",3,"src"]],template:function(e,t){1&e&&a.Cc(0,z,21,6,"div",0),2&e&&a.mc("ngIf",t.dataSede)},directives:[n.m,h.e,n.l],pipes:[n.e],styles:["[_ngcontent-%COMP%]:global   .text-simple[_ngcontent-%COMP%]{display:none}.content-body[_ngcontent-%COMP%]{min-height:calc(100vh - 74px)}.fondo-beige[_ngcontent-%COMP%]{background:beige}.content-num-mesa[_ngcontent-%COMP%]{border:1px solid #616161;border-radius:50%;overflow:hidden;display:table-cell;text-align:center;vertical-align:middle;color:#424242}.num-mesa[_ngcontent-%COMP%]{margin:0;font-size:42px}.info-establecimiento-content[_ngcontent-%COMP%], .num-mesa[_ngcontent-%COMP%]{padding:15px}.content-register[_ngcontent-%COMP%]{padding:10px;background:#303f9f;color:#fff}.content-ready[_ngcontent-%COMP%]{padding:25px;background:#00695c;color:#fff}.xp-15[_ngcontent-%COMP%]{padding:15px}p[_ngcontent-%COMP%]{margin:0}"]}),e})(),G=(()=>{class e{constructor(e,t,i,n){this.verifyClientService=e,this.router=t,this.authService=i,this.infoToken=n,this.isProcesando=!0,this.veryfyClient=null}ngOnInit(){this.veryfyClient=this.verifyClientService.verifyClient().subscribe(e=>{e&&(this.isProcesando=!1,this.setInfoToken(e))})}ngOnDestroy(){this.veryfyClient.unsubscribe()}setInfoToken(e){const t=`eyCJ9.${btoa(JSON.stringify(e))}`;this.authService.setLocalToken(t),this.authService.setLoggedStatus(!0),this.infoToken.converToJSON(),!this.infoToken.infoUsToken.direccionEnvioSelected&&this.infoToken.isDelivery()?(this.verifyClientService.setIsDelivery(!0),this.router.navigate(["./zona-delivery"])):this.router.navigate(["./pedido"])}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b),a.Ob(s.b),a.Ob(v.a),a.Ob(C.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-callback-auth"]],decls:6,vars:0,consts:[[1,"container-scan","animated","fadeIn","text-center"],[1,"text-center"],["mode","indeterminate"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div"),a.Ub(2,"div",1),a.Ub(3,"p"),a.Ec(4,"Obteniendo datos ..."),a.Tb(),a.Pb(5,"mat-progress-bar",2),a.Tb(),a.Tb(),a.Tb())},directives:[I.a],styles:[".container-scan[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;background:hsla(0,0%,62%,.31)}"]}),e})(),B=(()=>{class e{constructor(e){this.verifyClientService=e}canActivate(){return this.verifyClientService.getIsQrSuccess()||this.verifyClientService.getIsDelivery()}}return e.\u0275fac=function(t){return new(t||e)(a.Yb(b))},e.\u0275prov=a.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function J(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",3),a.Ub(1,"div",4),a.Ub(2,"p",5),a.Ec(3,"Registrate para comenzar hacer tu pedido."),a.Tb(),a.Tb(),a.Pb(4,"hr"),a.Ub(5,"div",6),a.Ub(6,"div",7),a.cc("click",(function(){return a.wc(e),a.gc().goFb()})),a.Pb(7,"i",8),a.Ub(8,"span",9),a.Ec(9,"Con Facebook"),a.Tb(),a.Tb(),a.Ub(10,"div",10),a.cc("click",(function(){return a.wc(e),a.gc().goGmail()})),a.Pb(11,"i",11),a.Ub(12,"span",9),a.Ec(13,"Con Gmail"),a.Tb(),a.Tb(),a.Pb(14,"hr"),a.Ub(15,"div",12),a.cc("click",(function(){return a.wc(e),a.gc().viewLoginDni()})),a.Pb(16,"i",13),a.Ub(17,"span",9),a.Ec(18,"Con DNI"),a.Tb(),a.Tb(),a.Tb(),a.Tb()}}const $=function(e){return{selected:e}};function Y(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",31),a.cc("click",(function(){a.wc(e);const i=t.$implicit;return a.gc(4).verificarDNI(i)})),a.Ub(1,"div"),a.Ec(2),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit;a.mc("ngClass",a.rc(2,$,e.selected)),a.Cb(2),a.Fc(e.fecha)}}function H(e,t){if(1&e&&(a.Sb(0,14),a.Ub(1,"p",27),a.Ec(2),a.Tb(),a.Ub(3,"span",28),a.Ec(4,"Para confirmar su identidad, indique la fecha en que nacio."),a.Tb(),a.Ub(5,"div",29),a.Cc(6,Y,3,4,"div",30),a.Tb(),a.Rb()),2&e){const e=a.gc(3);a.Cb(2),a.Gc(" ",e.dataCliente.name," "),a.Cb(4),a.mc("ngForOf",e.listViewDate)}}function K(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div"),a.Ub(1,"mat-form-field",20),a.Ub(2,"input",21,22),a.cc("keyup.enter",(function(){a.wc(e);const t=a.vc(3);return a.gc(2).buscarDNI(t.value)})),a.Tb(),a.Ub(4,"button",23),a.cc("click",(function(){a.wc(e);const t=a.vc(3);return a.gc(2).buscarDNI(t.value)})),a.Pb(5,"i",24),a.Tb(),a.Tb(),a.Ub(6,"div",20),a.Pb(7,"mat-progress-bar",25),a.Ub(8,"span",26),a.Ec(9),a.Tb(),a.Tb(),a.Cc(10,H,7,2,"ng-container",2),a.Tb()}if(2&e){const e=a.gc(2);a.Cb(7),a.mc("hidden",!e.loadConsulta),a.Cb(2),a.Fc(e.msj_error),a.Cb(1),a.mc("ngIf",e.isValidDNI)}}function Z(e,t){1&e&&(a.Sb(0),a.Ub(1,"span",35),a.Ec(2,"Excelente usuario validado."),a.Tb(),a.Rb())}function X(e,t){1&e&&(a.Ub(0,"span",36),a.Ec(1,"Seleccione con cuidado, de lo contrario no podra registrase con este documento."),a.Tb())}function W(e,t){if(1&e&&(a.Sb(0,32),a.Cc(1,Z,3,0,"ng-container",33),a.Cc(2,X,2,0,"ng-template",null,34,a.Dc),a.Rb()),2&e){const e=a.vc(3),t=a.gc(2);a.Cb(1),a.mc("ngIf",t.isDateBirthdayValid&&t.isPaseOk)("ngIfElse",e)}}function ee(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",14),a.Ub(1,"div",15),a.cc("click",(function(){return a.wc(e),a.gc().viewLoginDni()})),a.Ub(2,"p",5),a.Pb(3,"i",16),a.Ec(4," Escriba su DNI."),a.Tb(),a.Tb(),a.Pb(5,"hr"),a.Ub(6,"div",17),a.Cc(7,K,11,3,"div",18),a.Ub(8,"div",3),a.Cc(9,W,4,2,"ng-container",19),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.gc();a.Cb(7),a.mc("ngIf",!e.isPaseOk),a.Cb(2),a.mc("ngIf",e.isListDateSelect)}}let te=(()=>{class e{constructor(e,t,i,n){this.verifyClientService=e,this.router=t,this.auth=i,this.crudService=n,this.loadConsulta=!1,this.isViewLoginDNI=!1,this.isValidDNI=!1,this.isDateBirthdayValid=!1,this.isListDateSelect=!1,this.isPaseOk=!1,this.dataClienteSend=new d,this.msj_error="",this.listViewDate=[],this.listDay=[],this.listMotnh=[],this.listYear=[],this.numDocumento=""}ngOnInit(){this.dataClienteSend=this.verifyClientService.getDataClient()}goFb(){this.auth.login("#","facebook")}goGmail(){this.auth.login("#","google-oauth2")}viewLoginDni(){this.isViewLoginDNI=!this.isViewLoginDNI}buscarDNI(e){e.length<8||this.numDocumento===e||(this.isValidDNI=!1,this.isListDateSelect=!1,this.limpiarFrm(),this.numDocumento=e,this.loadConsulta=!0,this.crudService.getConsultaRucDni("dni",this.numDocumento).subscribe(e=>{if(!e.success)return this.loadConsulta=!1,this.isValidDNI=!1,void(this.msj_error="Numero de documento no valido.");this.loadConsulta=!1,this.isValidDNI=!0,this.dataCliente=e.data,this.getListDates()},e=>{this.loadConsulta=!1,this.isValidDNI=!1,this.msj_error="No se encontro, intentelo nuevamente.",alert(e.message)}))}limpiarFrm(){this.listViewDate=[],this.listDay=[],this.listMotnh=[],this.listYear=[],this.isValidDNI=!1,this.numDocumento="",this.msj_error=""}getListDates(){const e=this.dataCliente.date_of_birthday.split("/");this.listViewDate=[],this.listDay=[],this.listMotnh=[],this.listYear=[],this.addListDate(this.listDay,e[0],"dd"),this.addListDate(this.listMotnh,e[1],"mm"),this.addListDate(this.listYear,e[2],"yy");let t=0,i="";for(this.listViewDate.push({fecha:this.dataCliente.date_of_birthday,selected:!1});t<3;)i=`${this.listDay[this.getRandomArbitrary(0,2)]}/${this.listMotnh[this.getRandomArbitrary(0,2)]}/${this.listYear[this.getRandomArbitrary(0,2)]}`,this.listViewDate.push({fecha:i,selected:!1}),t++;this.listViewDate.sort((function(e,t){return.5-Math.random()})),this.listViewDate.sort((function(e,t){return.5-Math.random()}))}addListDate(e,t,i){const n=parseInt(t.toString(),0);let s=0;e.push(this.ceroIzq(n)),s=this.getRandomArbitrary(1,4);let a=this.getRandomArbitrary(0,20)<10?n+s:n-s;a=a===n?this.getRandomArbitrary(0,20)<10?n+s:n-s:a,e.push(this.ceroIzq(this.verificarNum(a,i))),s=this.getRandomArbitrary(1,4);let o=this.getRandomArbitrary(0,20)<10?n+s:n-s;o=a===o?this.getRandomArbitrary(0,20)<10?n+s:n-s:o,e.push(this.ceroIzq(this.verificarNum(o,i))),e.sort((e,t)=>e+t)}ceroIzq(e){return e<10?"0"+e.toString():e.toString()}verificarNum(e,t){let i=e;switch(t){case"dd":i=e<=0||e>31?this.getRandomArbitrary(1,28):e;break;case"mm":i=e<=0||e>12?this.getRandomArbitrary(1,12):e}return i}getRandomArbitrary(e,t){return Math.floor(Math.random()*(t-e)+e)}verificarDNI(e){this.listViewDate.map(e=>e.selected=!1),e.selected=!0,this.isListDateSelect=!0,this.isDateBirthdayValid=e.fecha===this.dataCliente.date_of_birthday,this.isPaseOk=this.isDateBirthdayValid,this.isPaseOk?(this.verifyClientService.clientSocket.datalogin=this.dataCliente,this.verifyClientService.clientSocket.datalogin.sub="dni|"+this.dataCliente.number,this.verifyClientService.clientSocket.datalogin.name=this.dataCliente.names+" "+this.dataCliente.first_name+" "+this.dataCliente.last_name,this.verifyClientService.clientSocket.datalogin.given_name=this.dataCliente.names&&this.dataCliente.names.indexOf(" ")>0?this.dataCliente.names.split(" ")[0]:this.dataCliente.names,this.verifyClientService.setDataClient(),this.verifyClientService.setIsLoginByDNI(!0),this.auth.loggedIn=!0,setTimeout(()=>{this.router.navigate(["/callback-auth"])},2e3)):this.limpiarFrm()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(b),a.Ob(s.b),a.Ob(c.a),a.Ob(r.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-login-cliente"]],decls:3,vars:2,consts:[[1,"animated","fadeIn"],["class","text-center",4,"ngIf"],["class","animated fadeInUp",4,"ngIf"],[1,"text-center"],[1,"p-3","pt-5"],[1,"fs-18","fw-600"],[1,"p-3"],["matRipple","",1,"btn-social","fb",3,"click"],["aria-hidden","true",1,"fa","fa-facebook"],[1,"pl-2"],["matRipple","",1,"btn-social","gmail",3,"click"],["aria-hidden","true",1,"fa","fa-google"],["matRipple","",1,"btn-social","dni",3,"click"],["aria-hidden","true",1,"fa","fa-id-card-o"],[1,"animated","fadeInUp"],[1,"pr-5","pt-5","pl-5","pb-2",3,"click"],[1,"fa","fa-arrow-left","pr-2"],[1,"pr-5","pt-2","pl-5","pb-0"],[4,"ngIf"],["class","animated pulse",4,"ngIf"],[1,"w-100"],["matInput","","placeholder","DNI","maxlength","8","type","number",3,"keyup.enter"],["dni",""],["mat-flat-button","","color","primary","matSuffix","",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-right"],["mode","indeterminate",2,"bottom","20px",3,"hidden"],[1,"fs-13","text-danger"],[1,"fs-13","fw-600"],[1,"fs-13","text-info"],[1,"div-list-date","text-center"],["matRipple","","class","item-list-date border-bottom",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"item-list-date","border-bottom",3,"ngClass","click"],[1,"animated","pulse"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"text-success","fs-20"],[1,"text-danger","fs-14"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Cc(1,J,19,0,"div",1),a.Cc(2,ee,10,2,"div",2),a.Tb()),2&e&&(a.Cb(1),a.mc("ngIf",!t.isViewLoginDNI),a.Cb(1),a.mc("ngIf",t.isViewLoginDNI))},directives:[n.m,h.e,y.a,T.a,u.a,y.d,I.a,n.l,n.k],styles:[".div-list-date[_ngcontent-%COMP%]{padding:10px}.item-list-date[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.item-list-date.selected[_ngcontent-%COMP%]{background-attachment:#ffffe0}.btn-social[_ngcontent-%COMP%]{margin:15px;color:#fff;padding:10px;border-radius:5px}.btn-social.fb[_ngcontent-%COMP%]{background:#1e90ff}.btn-social.gmail[_ngcontent-%COMP%]{background:#d32f2f}.btn-social.dni[_ngcontent-%COMP%]{background:#5e35b1}"]}),e})();function ie(e,t){if(1&e){const e=a.Vb();a.Ub(0,"li",1),a.cc("click",(function(){a.wc(e);const i=t.$implicit;return a.gc().selected(i)})),a.Ub(1,"div",2),a.Ub(2,"p",3),a.Ec(3),a.Tb(),a.Ub(4,"p",4),a.Ec(5),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit;a.Cb(3),a.Fc(e.titulo),a.Cb(2),a.Fc(e.direccion)}}let ne=(()=>{class e{constructor(e,t){this.crudService=e,this.verifyClientService=t,this.direccionSelected=new a.o}ngOnInit(){this.infoClienteLogueado=this.verifyClientService.getDataClient(),this.loadDireccion()}loadDireccion(){this.crudService.postFree({idcliente:this.infoClienteLogueado.idcliente},"delivery","get-direccion-cliente",!1).subscribe(e=>{this.listDirecciones=e.data,1===this.listDirecciones.length&&null===this.infoClienteLogueado.direccionEnvioSelected&&this.direccionSelected.emit(this.listDirecciones[0])})}selected(e){this.direccionSelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-seleccionar-direccion"]],outputs:{direccionSelected:"direccionSelected"},decls:2,vars:1,consts:[["class","li-item","matRipple","",3,"click",4,"ngFor","ngForOf"],["matRipple","",1,"li-item",3,"click"],[1,"p-3"],[1,"fw-600","fs-14"],[1,"fw-100","fs-13"]],template:function(e,t){1&e&&(a.Ub(0,"ul"),a.Cc(1,ie,6,2,"li",0),a.Tb()),2&e&&(a.Cb(1),a.mc("ngForOf",t.listDirecciones))},directives:[n.l,h.e],styles:["p[_ngcontent-%COMP%]{margin-bottom:0}.li-item[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}"]}),e})();class se{}var ae=i("pxUr"),oe=i("QibW");const ce=["search"],re=["registerForm"];function le(e,t){1&e&&a.Qb(0)}function de(e,t){1&e&&a.Ec(0," Listo Guardar ")}function be(e,t){1&e&&(a.Sb(0),a.Pb(1,"i",30),a.Ec(2," Guardando ... "),a.Rb())}function he(e,t){1&e&&(a.Pb(0,"i",31),a.Ec(1," Hecho "))}function ue(e,t){if(1&e&&(a.Cc(0,be,3,0,"ng-container",28),a.Cc(1,he,2,0,"ng-template",null,29,a.Dc)),2&e){const e=a.vc(2),t=a.gc();a.mc("ngIf",1===t.loader)("ngIfElse",e)}}let ge=(()=>{class e{constructor(e,t,i,n,s){this.formBuilder=e,this.mapsAPILoader=t,this.ngZone=i,this.verifyClientService=n,this.crudService=s,this.loader=0,this.dataMaps=new a.o,this.saveDireccionOk=new a.o}ngOnInit(){this.dataCliente=new se,this.loadForm(),this.mapsAPILoader.load().then(()=>{this.setCurrentLocation(),this.geoCoder=new google.maps.Geocoder;const e=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement,{types:["address"],componentRestrictions:{country:"pe"}});e.addListener("place_changed",()=>{this.ngZone.run(()=>{const t=e.getPlace();null!=t.geometry&&(this.latitude=t.geometry.location.lat(),this.longitude=t.geometry.location.lng(),this.zoom=15)})})})}setCurrentLocation(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.zoom=16,this.getAddress(this.latitude,this.longitude)})}markerDragEnd(e){this.latitude=e.coords.lat,this.longitude=e.coords.lng,this.getAddress(this.latitude,this.longitude)}getAddress(e,t){this.geoCoder.geocode({location:{lat:e,lng:t}},(e,t)=>{"OK"===t?e[0]?(this.zoom=15,this.address=e[0].formatted_address,this.dataCliente.direccion=this.address,this.dataMapa=e[0]):window.alert("No results found"):window.alert("Geocoder failed due to: "+t)})}loadForm(){this.registerForm=this.formBuilder.group({direccion:["",S.p.required],referencia:[this.dataCliente.referencia,S.p.required],longitude:[this.longitude,S.p.required],latitude:[this.latitude,S.p.required],titulo:this.dataCliente.titulo||""}),this.registerForm.statusChanges.subscribe(e=>{"VALID"===e&&this.guardarDireccion()})}checkDireccion(e){""===e.trim()&&(this.longitude=null,this.latitude=null)}guardarDireccion(){this.dataCliente.idcliente=this.verifyClientService.getDataClient().idcliente,this.dataCliente.longitude=this.longitude,this.dataCliente.latitude=this.latitude,this.dataCliente.ciudad=this.searchTypeMap("locality"),this.dataCliente.provincia=this.searchTypeMap("administrative_area_level_2"),this.dataCliente.departamento=this.searchTypeMap("administrative_area_level_1"),this.dataCliente.pais=this.searchTypeMap("country"),this.dataCliente.codigo=this.searchTypeMap("postal_code")}saveDireccion(){this.loader=1,this.crudService.postFree(this.dataCliente,"cliente","new-direccion",!1).subscribe(e=>{setTimeout(()=>{this.loader=2,setTimeout(()=>{this.dataCliente.idcliente_pwa_direccion=e.data[0].idcliente_pwa_direccion,this.saveDireccionOk.emit(this.dataCliente)},500)},1e3),console.log(e)})}searchTypeMap(e){let t="";return this.dataMapa.address_components.map(i=>{i.types.map(n=>{if(n===e)return t=i.long_name,t})}),t}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(S.c),a.Ob(ae.d),a.Ob(a.A),a.Ob(b),a.Ob(r.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-agregar-direccion"]],viewQuery:function(e,t){var i;1&e&&(a.Jc(ce,!0),a.Jc(re,!0)),2&e&&(a.uc(i=a.dc())&&(t.searchElementRef=i.first),a.uc(i=a.dc())&&(t.myForm=i.first))},outputs:{dataMaps:"dataMaps",saveDireccionOk:"saveDireccionOk"},decls:45,vars:16,consts:[[1,"bg-warning","pt-3","pr-3","pl-3","p-1"],[1,"fs-13"],[3,"formGroup"],[1,"w-100"],[1,"p-3"],["matInput","","placeholder","Direccion","formControlName","direccion","autocorrect","off","autocapitalize","off","spellcheck","off","type","text","id","search",1,"input-headline",3,"ngModel","ngModelChange","keydown.enter","keyup"],["search",""],["matInput","","placeholder","Referencia / piso / oficina","formControlName","referencia",1,"input-headline",3,"ngModel","ngModelChange"],["hidden","true"],["matInput","","placeholder","Referencia / piso / oficina","formControlName","longitude",1,"input-headline",3,"ngModel","ngModelChange"],["matInput","","placeholder","Referencia / piso / oficina","formControlName","latitude",1,"input-headline",3,"ngModel","ngModelChange"],[1,"border"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],[1,"fw-600","fs-13"],[1,"fs-13",3,"ngModel","ngModelChange"],["radioGroup","matRadioGroup"],["checked","","value","Casa",1,"pr-3"],["value","Trabajo",1,"pr-3"],["value","Novi@",1,"pr-3"],["value","Otro",1,"pr-3"],[1,"text-center","pb-3"],["mat-flat-button","","mat-dialog-close","",1,"mr-3"],[1,"fa","fa-arrow-left"],["mat-flat-button","","color","primary",3,"disabled","click"],[4,"ngIf","ngIfThen","ngIfElse"],["thenTemplate",""],["elseTemplate",""],[4,"ngIf","ngIfElse"],["elseTemplateHecho",""],[1,"fa","fa-spinner","fa-spin","fa-fw"],[1,"fa","fa-check"]],template:function(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",0),a.Ub(1,"p",1),a.Ec(2,"Indique la direccion exacta de entrega. "),a.Ub(3,"strong"),a.Ec(4,"Se tomara como referencia el punto que especifica en el mapa."),a.Tb(),a.Tb(),a.Tb(),a.Ub(5,"div"),a.Ub(6,"form",2),a.Ub(7,"div",3),a.Ub(8,"div",4),a.Ub(9,"mat-form-field",3),a.Ub(10,"input",5,6),a.cc("ngModelChange",(function(e){return t.dataCliente.direccion=e}))("keydown.enter",(function(e){return e.preventDefault()}))("keyup",(function(){a.wc(e);const i=a.vc(11);return t.checkDireccion(i.value)})),a.Tb(),a.Tb(),a.Ub(12,"mat-form-field",3),a.Ub(13,"input",7),a.cc("ngModelChange",(function(e){return t.dataCliente.referencia=e})),a.Tb(),a.Tb(),a.Ub(14,"div",8),a.Ub(15,"mat-form-field",3),a.Ub(16,"input",9),a.cc("ngModelChange",(function(e){return t.longitude=e})),a.Tb(),a.Tb(),a.Ub(17,"mat-form-field",3),a.Ub(18,"input",10),a.cc("ngModelChange",(function(e){return t.latitude=e})),a.Tb(),a.Tb(),a.Tb(),a.Ub(19,"div",11),a.Ub(20,"agm-map",12),a.Ub(21,"agm-marker",13),a.cc("dragEnd",(function(e){return t.markerDragEnd(e)})),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(22,"div",4),a.Ub(23,"p",14),a.Ec(24,"Esta es la direcci\xf3n de mi:"),a.Tb(),a.Ub(25,"mat-radio-group",15,16),a.cc("ngModelChange",(function(e){return t.dataCliente.titulo=e})),a.Ub(27,"mat-radio-button",17),a.Ec(28,"Casa"),a.Tb(),a.Ub(29,"mat-radio-button",18),a.Ec(30,"Trabajo"),a.Tb(),a.Ub(31,"mat-radio-button",19),a.Ec(32,"Novi@"),a.Tb(),a.Ub(33,"mat-radio-button",20),a.Ec(34,"Otro"),a.Tb(),a.Tb(),a.Tb(),a.Ub(35,"div",21),a.Ub(36,"button",22),a.Pb(37,"i",23),a.Ec(38," Atras "),a.Tb(),a.Ub(39,"button",24),a.cc("click",(function(){return t.saveDireccion()})),a.Cc(40,le,1,0,"ng-container",25),a.Cc(41,de,1,0,"ng-template",null,26,a.Dc),a.Cc(43,ue,3,2,"ng-template",null,27,a.Dc),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.vc(42),i=a.vc(44);a.Cb(6),a.mc("formGroup",t.registerForm),a.Cb(4),a.mc("ngModel",t.dataCliente.direccion),a.Cb(3),a.mc("ngModel",t.dataCliente.referencia),a.Cb(3),a.mc("ngModel",t.longitude),a.Cb(2),a.mc("ngModel",t.latitude),a.Cb(2),a.mc("latitude",t.latitude)("longitude",t.longitude)("zoom",t.zoom),a.Cb(1),a.mc("latitude",t.latitude)("longitude",t.longitude)("markerDraggable",!0),a.Cb(4),a.mc("ngModel",t.dataCliente.titulo),a.Cb(14),a.mc("disabled",!t.registerForm.valid||t.loader>0),a.Cb(1),a.mc("ngIf",0===t.loader)("ngIfThen",e)("ngIfElse",i)}},directives:[S.q,S.k,S.e,y.a,T.a,S.b,S.j,S.d,ae.b,ae.c,oe.b,S.m,oe.a,u.a,U.c,n.m],styles:["agm-map[_ngcontent-%COMP%]{height:200px}.input-headline[_ngcontent-%COMP%]{font-size:13px;line-height:13px}"]}),e})();const me=function(){return["../"]},fe=[{path:"",component:o,data:{titulo:"Inicio"},children:[{path:"",redirectTo:"inicio"},{path:"inicio",component:f,data:{titulo:"Inicio"}},{path:"login-personal-autorizado",component:D,data:{titulo:"Login Personal Autorizado"}},{path:"lector-qr",component:F,data:{titulo:"Lector QR"}},{path:"lector-success",component:j,canActivate:[B],data:{titulo:"Lector QR"}},{path:"login-client",component:te,canActivate:[B],data:{titulo:"Loguear"}},{path:"callback-auth",canActivate:[B],component:G,data:{titulo:"Callback Auth"}},{path:"direccion-delivery",component:(()=>{class e{constructor(e,t){this.router=e,this.verifyClientService=t,this.isFormValid=!1,this.loader=0}ngOnInit(){}setDireccion(e){this.verifyClientService.setDireccionDeliverySelected(e),this.goZonaEstablecimiento()}goZonaEstablecimiento(){this.router.navigate(["/zona-delivery"])}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(s.b),a.Ob(b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-seleccionar-ubicacion-delivery"]],decls:9,vars:2,consts:[[1,"animated","fadeIn"],[1,"header-app","p-3"],[1,"fa","fa-arrow-left",3,"routerLink"],[1,"pl-2"],[3,"direccionSelected"],[3,"saveDireccionOk"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Pb(2,"i",2),a.Ub(3,"span",3),a.Ec(4,"Direccion de entrega"),a.Tb(),a.Tb(),a.Ub(5,"div"),a.Ub(6,"app-seleccionar-direccion",4),a.cc("direccionSelected",(function(e){return t.setDireccion(e)})),a.Tb(),a.Tb(),a.Ub(7,"div"),a.Ub(8,"app-agregar-direccion",5),a.cc("saveDireccionOk",(function(e){return t.setDireccion(e)})),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(2),a.mc("routerLink",a.qc(1,me)))},directives:[s.c,ne,ge],styles:["agm-map[_ngcontent-%COMP%]{height:300px}"]}),e})(),data:{titulo:"Seleccionar Direccion"}}]}];let pe=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[s.d.forChild(fe)],s.d]}),e})();var ve=i("rsRi"),Ce=i("lSLK");let Se=(()=>{class e{}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[n.c,S.f,pe,ve.a,Ce.a,w.b]]}),e})()}}]);